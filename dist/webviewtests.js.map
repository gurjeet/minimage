{"version":3,"sources":["webpack:///webviewtests.js","webpack:///webpack/bootstrap 10554a9a5c3724833394","webpack:///./src/colorToRGB.js","webpack:///./src/canvasMergerAndDonwloaderLink.js","webpack:///./src/getAnImage.js","webpack:///./src/welcomeAnim.js","webpack:///./src/webviewtests.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_toConsumableArray","arr","Array","isArray","arr2","length","from","colorToRGB","color","canvas","document","createElement","width","height","ctx","getContext","clearRect","fillStyle","fillRect","concat","getImageData","data","slice","luminance","reduce","a","b","value","makeDownloadLink","link","_ref","downloadImage","e","filename","originalFileName","downloadCounter","this","href","mergeCanvasAndImage","OrginalImage","toDataURL","download","addEventListener","img","oldComposite","globalCompositeOperation","drawImage","default","loadFile","fileToLoad","startTask","fileReader","FileReader","onload","createImageWithFileContent","result","endTask","onerror","readAsDataURL","askingForImage","Image","onImageCreated","src","handleDataTransferItems","items","imageFile","find","kind","type","match","getAsFile","url","getAsString","fileinput","_ref$startTask","undefined","_ref$endTask","fileChanged","changeEvent","removeEventListener","split","pop","target","files","window","ev","clipboardData","body","preventDefault","stopPropagation","dataTransfer","randomColor","colorPool","exception","arguments","withoutEx","filter","Math","floor","random","reset","w","innerWidth","h","innerHeight","bgColor","lineCap","randomizeInst","position","x","y","speed","acceleration","strokeStyle","coolColors","lineWidth","beginPath","moveTo","randomAcceletation","accelerationTimeoutHandle","setTimeout","renderCanvas","lineTo","stroke","drawLoop","isDrawing","requestAnimationFrame","stopAnim","clearTimeout","darkCoolColors","_colorToRGB","_interopRequireDefault","obj","_getAnImage","_getAnImage2","_welcomeAnim","_welcomeAnim2","_canvasMergerAndDonwloaderLink","byId","getElementById","bind","appendChild","innerHTML"],"mappings":"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","file":"webviewtests.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/dist/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 14);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.colorToRGB = colorToRGB;\nexports.luminance = luminance;\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction colorToRGB(color) {\n  var canvas = document.createElement(\"canvas\");\n  canvas.width = canvas.height = 1;\n  var ctx = canvas.getContext(\"2d\");\n  ctx.clearRect(0, 0, 1, 1);\n  ctx.fillStyle = color;\n  ctx.fillRect(0, 0, 1, 1);\n  return [].concat(_toConsumableArray(ctx.getImageData(0, 0, 1, 1).data)).slice(0, 3);\n}\n\nfunction luminance(color) {\n  return colorToRGB(color).reduce(function (a, b) {\n    return a + b;\n  }, 0) / 3;\n}\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.makeDownloadLink = makeDownloadLink;\nexports.mergeCanvasAndImage = mergeCanvasAndImage;\nfunction makeDownloadLink(link, _ref) {\n  var OrginalImage = _ref.OrginalImage,\n      canvas = _ref.canvas,\n      originalFileName = _ref.originalFileName;\n\n  // Download button\n  var downloadCounter = 0;\n  link.addEventListener(\"click\", downloadImage, false);\n  function downloadImage(e) {\n    var filename = originalFileName + \"-minimage-\" + downloadCounter + \".png\";\n    this.href = mergeCanvasAndImage(canvas, OrginalImage).toDataURL(\"image/png\", 0.5);\n    this.download = filename;\n    downloadCounter++;\n  }\n}\n\nfunction mergeCanvasAndImage(canvas, img) {\n  // Pastes the image as a canvas background\n  var ctx = canvas.getContext(\"2d\");\n  var oldComposite = ctx.globalCompositeOperation;\n  ctx.globalCompositeOperation = \"destination-over\";\n\n  // Draw the orignal image\n  ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n\n  ctx.globalCompositeOperation = oldComposite;\n\n  return canvas;\n}\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (_ref) {\n  var onImageCreated = _ref.onImageCreated,\n      fileinput = _ref.fileinput,\n      _ref$startTask = _ref.startTask,\n      startTask = _ref$startTask === undefined ? function () {\n    return null;\n  } : _ref$startTask,\n      _ref$endTask = _ref.endTask,\n      endTask = _ref$endTask === undefined ? function () {\n    return null;\n  } : _ref$endTask;\n\n  // Callbacks onImageCreated with img tag and filename\n  var originalFileName = \"pasted-image\";\n  var askingForImage = true;\n\n  // Transforms the file input content to a real image\n  function loadFile(fileToLoad) {\n    startTask();\n    var fileReader = new FileReader();\n    fileReader.onload = function () {\n      createImageWithFileContent(fileReader.result);\n      endTask();\n    };\n    fileReader.onerror = endTask;\n    fileReader.readAsDataURL(fileToLoad);\n  }\n\n  function createImageWithFileContent(result) {\n    startTask();\n    if (!askingForImage) return;\n    var img = new Image();\n    img.onload = function () {\n      askingForImage = false;\n      onImageCreated(img, originalFileName);\n      endTask();\n    };\n    img.onerror = endTask;\n    img.src = result;\n  }\n\n  // Setup of the welcome  UI\n  function askForImage() {\n    fileinput && fileinput.addEventListener(\"change\", fileChanged);\n    function fileChanged(changeEvent) {\n      fileinput.removeEventListener(\"change\", fileChanged);\n      originalFileName = fileinput.value.split(\"\\\\\").pop().split(\".\")[0] || \"image\";\n      loadFile(changeEvent.target.files[0]);\n    }\n  }\n\n  askForImage();\n\n  window.addEventListener(\"paste\", function (ev) {\n    handleDataTransferItems(ev.clipboardData.items);\n  });\n\n  document.body.addEventListener(\"dragover\", function (ev) {\n    ev.preventDefault();\n    ev.stopPropagation();\n  });\n  document.body.addEventListener(\"drop\", function (ev) {\n    ev.preventDefault();\n    ev.stopPropagation();\n    handleDataTransferItems(ev.dataTransfer.items);\n  });\n\n  function handleDataTransferItems(items) {\n    // Tries to paste an image\n    var imageFile = Array.prototype.find.call(items, function (e) {\n      return e.kind == \"file\" && e.type.match(\"image\");\n    });\n    originalFileName = \"pasted-image\";\n    if (imageFile) {\n      loadFile(imageFile.getAsFile());\n      return;\n    }\n    // Tries to load a remote image given its adress\n    var url = Array.prototype.find.call(items, function (e) {\n      return e.kind == \"string\";\n    });\n    if (url) {\n      url.getAsString(function (s) {\n        return createImageWithFileContent(s);\n      });\n    }\n  }\n};\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (canvas) {\n  var ctx = void 0,\n      w = void 0,\n      h = void 0;\n  var bgColor = randomColor(darkCoolColors);\n  function reset() {\n    w = canvas.width = window.innerWidth;\n    h = canvas.height = window.innerHeight;\n    ctx = canvas.getContext(\"2d\");\n    ctx.fillStyle = bgColor;\n    ctx.fillRect(0, 0, w, h);\n    ctx.lineCap = \"round\";\n    randomizeInst();\n  }\n\n  var position = void 0,\n      speed = void 0,\n      acceleration = void 0,\n      timeoutHandle = void 0,\n      accelerationTimeoutHandle = void 0;\n  function randomizeInst() {\n    position = {\n      // x: Math.random() * w,\n      // y: Math.random() * h\n      x: w / 2,\n      y: h / 2\n    };\n    speed = {\n      x: Math.random() * 10 - 5,\n      y: Math.random() * 10 - 5\n    };\n    acceleration = {\n      x: Math.random() * 10 - 5,\n      y: Math.random() * 10 - 5\n    };\n\n    ctx.strokeStyle = randomColor(coolColors, bgColor);\n    ctx.lineWidth = 20 + Math.random() * 40;\n    ctx.beginPath();\n    ctx.moveTo(position.x, position.y);\n  }\n\n  reset();\n  window.addEventListener(\"resize\", reset);\n\n  function randomAcceletation() {\n    acceleration = {\n      x: Math.random() * 2 - 1,\n      y: Math.random() * 2 - 1\n    };\n    // speed.x*=0.2;\n    // speed.y*=0.2;\n\n    accelerationTimeoutHandle = setTimeout(randomAcceletation, 100 + Math.random() * 200);\n  }\n  randomAcceletation();\n  function renderCanvas() {\n    ctx.moveTo(position.x, position.y);\n    speed.x *= 0.95;\n    speed.y *= 0.95;\n\n    speed.x += acceleration.x;\n    speed.y += acceleration.y;\n    position.x += speed.x;\n    position.y += speed.y;\n    ctx.lineTo(position.x, position.y);\n    ctx.stroke();\n    if (position.x < -50 || position.x > w + 50 || position.y < -50 || position.y > h + 50) randomizeInst();\n  }\n\n  var isDrawing = true;\n  function drawLoop() {\n    if (isDrawing) {\n      window.requestAnimationFrame(drawLoop);\n      renderCanvas();\n    }\n  }\n\n  drawLoop();\n\n  function stopAnim() {\n    isDrawing = false;\n    clearTimeout(accelerationTimeoutHandle);\n    window.removeEventListener(\"resize\", reset);\n  }\n\n  return {\n    stopAnim: stopAnim,\n    bgColor: bgColor\n  };\n};\n\nvar _colorToRGB = __webpack_require__(0);\n\nvar coolColors = \"#F44336,#E91E63,#9C27B0,#673AB7,#3F51B5,#2196F3,#03A9F4,#00BCD4,#009688,#4CAF50,#8BC34A,#CDDC39,#FFEB3B,#FFC107,#FF9800,#FF5722\".split(\",\");\nvar darkCoolColors = coolColors.filter(function (c) {\n  return (0, _colorToRGB.luminance)(c) < 150;\n});\n\nfunction randomColor(colorPool) {\n  var exception = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n\n  var withoutEx = colorPool.filter(function (c) {\n    return c != exception;\n  });\n  return withoutEx[Math.floor(Math.random() * (withoutEx.length + 0.99))];\n}\n\n/***/ }),\n/* 4 */,\n/* 5 */,\n/* 6 */,\n/* 7 */,\n/* 8 */,\n/* 9 */,\n/* 10 */,\n/* 11 */,\n/* 12 */,\n/* 13 */,\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(15);\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _getAnImage = __webpack_require__(2);\n\nvar _getAnImage2 = _interopRequireDefault(_getAnImage);\n\nvar _welcomeAnim = __webpack_require__(3);\n\nvar _welcomeAnim2 = _interopRequireDefault(_welcomeAnim);\n\nvar _canvasMergerAndDonwloaderLink = __webpack_require__(1);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar byId = document.getElementById.bind(document);\n\n(0, _getAnImage2.default)({\n  fileinput: byId(\"fileinput\"),\n  onImageCreated: function onImageCreated(img, filename) {\n    document.body.appendChild(img);\n    (0, _canvasMergerAndDonwloaderLink.makeDownloadLink)(byId(\"testDL\"), {\n      OrginalImage: img,\n      originalFileName: \"youpi\",\n      canvas: byId(\"testCanvas\")\n    });\n    byId(\"testDL\").innerHTML = \"Download ready\";\n  }\n});\n(0, _welcomeAnim2.default)(byId(\"testCanvas\"));\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// webviewtests.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 14);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 10554a9a5c3724833394","export function colorToRGB(color) {\n  var canvas = document.createElement(\"canvas\");\n  canvas.width = canvas.height = 1;\n  var ctx = canvas.getContext(\"2d\");\n  ctx.clearRect(0, 0, 1, 1);\n  ctx.fillStyle = color;\n  ctx.fillRect(0, 0, 1, 1);\n  return [...ctx.getImageData(0, 0, 1, 1).data].slice(0, 3);\n}\n\nexport function luminance(color) {\n  return colorToRGB(color).reduce((a, b) => a + b, 0) / 3;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/colorToRGB.js","export function makeDownloadLink(\n  link,\n  { OrginalImage, canvas, originalFileName }\n) {\n  // Download button\n  var downloadCounter = 0;\n  link.addEventListener(\"click\", downloadImage, false);\n  function downloadImage(e) {\n    let filename = originalFileName + \"-minimage-\" + downloadCounter + \".png\";\n    this.href = mergeCanvasAndImage(canvas, OrginalImage).toDataURL(\n      \"image/png\",\n      0.5\n    );\n    this.download = filename;\n    downloadCounter++;\n  }\n}\n\nexport function mergeCanvasAndImage(canvas, img) {\n  // Pastes the image as a canvas background\n  var ctx = canvas.getContext(\"2d\");\n  let oldComposite = ctx.globalCompositeOperation;\n  ctx.globalCompositeOperation = \"destination-over\";\n\n  // Draw the orignal image\n  ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n\n  ctx.globalCompositeOperation = oldComposite;\n\n  return canvas;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/canvasMergerAndDonwloaderLink.js","export default function({\n  onImageCreated,\n  fileinput,\n  startTask = () => null,\n  endTask = () => null\n}) {\n  // Callbacks onImageCreated with img tag and filename\n  let originalFileName = \"pasted-image\";\n  let askingForImage = true;\n\n  // Transforms the file input content to a real image\n  function loadFile(fileToLoad) {\n    startTask();\n    let fileReader = new FileReader();\n    fileReader.onload = () => {\n      createImageWithFileContent(fileReader.result);\n      endTask();\n    };\n    fileReader.onerror = endTask;\n    fileReader.readAsDataURL(fileToLoad);\n  }\n\n  function createImageWithFileContent(result) {\n    startTask();\n    if (!askingForImage) return;\n    let img = new Image();\n    img.onload = () => {\n      askingForImage = false;\n      onImageCreated(img, originalFileName);\n      endTask();\n    };\n    img.onerror = endTask;\n    img.src = result;\n  }\n\n  // Setup of the welcome  UI\n  function askForImage() {\n    fileinput && fileinput.addEventListener(\"change\", fileChanged);\n    function fileChanged(changeEvent) {\n      fileinput.removeEventListener(\"change\", fileChanged);\n      originalFileName =\n        fileinput.value.split(\"\\\\\").pop().split(\".\")[0] || \"image\";\n      loadFile(changeEvent.target.files[0]);\n    }\n  }\n\n  askForImage();\n\n  window.addEventListener(\"paste\", function(ev) {\n    handleDataTransferItems(ev.clipboardData.items);\n  });\n\n  document.body.addEventListener(\"dragover\", function(ev) {\n    ev.preventDefault();\n    ev.stopPropagation();\n  });\n  document.body.addEventListener(\"drop\", function(ev) {\n    ev.preventDefault();\n    ev.stopPropagation();\n    handleDataTransferItems(ev.dataTransfer.items);\n  });\n\n  function handleDataTransferItems(items) {\n    // Tries to paste an image\n    let imageFile = Array.prototype.find.call(\n      items,\n      e => e.kind == \"file\" && e.type.match(\"image\")\n    );\n    originalFileName = \"pasted-image\";\n    if (imageFile) {\n      loadFile(imageFile.getAsFile());\n      return;\n    }\n    // Tries to load a remote image given its adress\n    let url = Array.prototype.find.call(items, e => e.kind == \"string\");\n    if (url) {\n      url.getAsString(s => createImageWithFileContent(s));\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/getAnImage.js","import { luminance } from \"./colorToRGB.js\";\nconst coolColors = \"#F44336,#E91E63,#9C27B0,#673AB7,#3F51B5,#2196F3,#03A9F4,#00BCD4,#009688,#4CAF50,#8BC34A,#CDDC39,#FFEB3B,#FFC107,#FF9800,#FF5722\".split(\n  \",\"\n);\nconst darkCoolColors = coolColors.filter(c => luminance(c) < 150);\n\nfunction randomColor(colorPool, exception = \"\") {\n  let withoutEx = colorPool.filter(c => c != exception);\n  return withoutEx[Math.floor(Math.random() * (withoutEx.length + 0.99))];\n}\n\nexport default function(canvas) {\n  let ctx, w, h;\n  let bgColor = randomColor(darkCoolColors);\n  function reset() {\n    w = canvas.width = window.innerWidth;\n    h = canvas.height = window.innerHeight;\n    ctx = canvas.getContext(\"2d\");\n    ctx.fillStyle = bgColor;\n    ctx.fillRect(0, 0, w, h);\n    ctx.lineCap = \"round\";\n    randomizeInst();\n  }\n\n  let position, speed, acceleration, timeoutHandle, accelerationTimeoutHandle;\n  function randomizeInst() {\n    position = {\n      // x: Math.random() * w,\n      // y: Math.random() * h\n      x: w / 2,\n      y: h / 2\n    };\n    speed = {\n      x: Math.random() * 10 - 5,\n      y: Math.random() * 10 - 5\n    };\n    acceleration = {\n      x: Math.random() * 10 - 5,\n      y: Math.random() * 10 - 5\n    };\n\n    ctx.strokeStyle = randomColor(coolColors, bgColor);\n    ctx.lineWidth = 20 + Math.random() * 40;\n    ctx.beginPath();\n    ctx.moveTo(position.x, position.y);\n  }\n\n  reset();\n  window.addEventListener(\"resize\", reset);\n\n  function randomAcceletation() {\n    acceleration = {\n      x: Math.random() * 2 - 1,\n      y: Math.random() * 2 - 1\n    };\n    // speed.x*=0.2;\n    // speed.y*=0.2;\n\n    accelerationTimeoutHandle = setTimeout(\n      randomAcceletation,\n      100 + Math.random() * 200\n    );\n  }\n  randomAcceletation();\n  function renderCanvas() {\n    ctx.moveTo(position.x, position.y);\n    speed.x *= 0.95;\n    speed.y *= 0.95;\n\n    speed.x += acceleration.x;\n    speed.y += acceleration.y;\n    position.x += speed.x;\n    position.y += speed.y;\n    ctx.lineTo(position.x, position.y);\n    ctx.stroke();\n    if (\n      position.x < -50 ||\n      position.x > w + 50 ||\n      position.y < -50 ||\n      position.y > h + 50\n    )\n      randomizeInst();\n  }\n\n  let isDrawing = true;\n  function drawLoop() {\n    if (isDrawing) {\n      window.requestAnimationFrame(drawLoop);\n      renderCanvas();\n    }\n  }\n\n  drawLoop();\n\n  function stopAnim() {\n    isDrawing = false;\n    clearTimeout(accelerationTimeoutHandle);\n    window.removeEventListener(\"resize\", reset);\n  }\n\n  return {\n    stopAnim,\n    bgColor\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/welcomeAnim.js","import askForIMG from \"./getAnImage.js\";\n\nimport welcomeAnim from \"./welcomeAnim.js\";\nimport { makeDownloadLink } from \"./canvasMergerAndDonwloaderLink.js\";\n\nconst byId = document.getElementById.bind(document);\n\naskForIMG({\n  fileinput: byId(\"fileinput\"),\n  onImageCreated: (img, filename) => {\n    document.body.appendChild(img);\n    makeDownloadLink(byId(\"testDL\"), {\n      OrginalImage: img,\n      originalFileName: \"youpi\",\n      canvas: byId(\"testCanvas\")\n    });\n    byId(\"testDL\").innerHTML = \"Download ready\";\n  }\n});\nwelcomeAnim(byId(\"testCanvas\"));\n\n\n\n// WEBPACK FOOTER //\n// ./src/webviewtests.js"],"sourceRoot":""}