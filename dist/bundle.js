!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(e){"eraser"==e?d():u(e)}E=e,b();var n=w("drawzone");w("drawzoneWrapper").appendChild(e),w("inputForAFile").style.display="none",w("drawAndDownload").style.display="";var o=Math.max(window.innerHeight,window.innerWidth),r=Math.max(e.width/o,e.height/o,1);e.style.maxWidth=n.width=e.width/r,e.style.maxHeight=n.height=e.height/r;var i=(n.getContext("2d"),(0,f.default)(n,{})),u=i.drawWithColor,d=i.drawWithEraser,c=i.setPencilSize,s=w("background"),v=(0,a.default)(w("pensizePreview"),{onColorChange:t,elementToContrastWith:s}),m=v.setColorDotSize,h=v.refreshColorPreviewBorder;(0,l.default)(s,{onChange:h}),(0,p.default)(w("pensize"),{onChange:function(e){m(e),c(e)}}),(0,g.default)(w("download"),{OrginalImage:E,originalFileName:C,canvas:n})}n(2);var i=n(3),a=o(i),u=n(6),d=o(u),c=n(8),l=o(c),s=n(9),f=o(s),v=n(10),g=o(v),m=n(11),p=o(m),h=n(12),y=o(h),w=document.getElementById.bind(document),C=void 0,E=void 0;(0,d.default)({fileinput:w("fileinput"),onImageCreated:function(e,t){C=t,r(e)}});var F=(0,y.default)(w("welcome")),b=F.stopAnim},function(e,t){},function(e,t,n){"use strict";function o(e){return(0,d.default)(e).reduce(function(e,t){return e+t},0)/3}function r(e,t){if("eraser"==e)return"transparent";var n=o(t),r=o(e);return n>125&&r>200?"black":n<125&&r<25?"white":"transparent"}function i(e){return o(e)>127.5?"rgba(0,0,0,0.8)":"rgba(255,255,255,0.8)"}function a(e,t){function n(e){o(),t(e)}function o(){r.classList.add("closing"),setTimeout(function(){return document.body.removeChild(r)},300)}var r=document.createElement("div");r.classList.add("modal"),document.body.appendChild(r),c.paletteColors.forEach(function(t){var o=document.createElement("button");o.classList.add("colorbutton"),t===e&&(o.classList.add("active"),o.innerHTML="Selected",o.style.color=i(t)),o.style.backgroundColor=t.toLowerCase(),o.addEventListener("click",function(){return n(t)}),r.appendChild(o)});var a=document.createElement("button");a.classList.add("eraser"),a.addEventListener("click",function(){return n("eraser")}),a.innerHTML='<img src="/images/eraser-color.svg"/><span class="imagelabel">'+("eraser"===e?"Eraser selected":"Eraser")+"</span>",r.appendChild(a)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){function n(){c.style.border="1px solid "+r(s,d.style.backgroundColor)}function o(e){s=e,"eraser"==e?(c.style.background="",c.classList.add("eraser")):(c.classList.remove("eraser"),c.style.background=e,localStorage.setItem("color",e),n()),u(e)}function i(e){c.style.transform="scale("+e/10+")"}var u=t.onColorChange,d=t.elementToContrastWith,c=e.children[0],s=void 0;return e.addEventListener("click",function(){return a(s,o)}),setTimeout(function(){return o(localStorage.getItem("color")||l)}),{setColorDotSize:i,refreshColorPreviewBorder:n}};var u=n(4),d=function(e){return e&&e.__esModule?e:{default:e}}(u),c=n(5),l="#2b76ce"},function(e,t,n){"use strict";function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e){var t=document.createElement("canvas");t.width=t.height=1;var n=t.getContext("2d");return n.clearRect(0,0,1,1),n.fillStyle=e,n.fillRect(0,0,1,1),[].concat(o(n.getImageData(0,0,1,1).data)).slice(0,3)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.paletteColors="#000000,#FFFFFF,#F44336,#E91E63,#9C27B0,#673AB7,#3F51B5,#2196F3,#03A9F4,#00BCD4,#009688,#4CAF50,#8BC34A,#CDDC39,#FFEB3B,#FFC107,#FF9800,#FF5722,#795548,#9E9E9E,#607D8B".split(",")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(e){(0,o.startTask)();var t=new FileReader;t.onload=function(){n(t.result),(0,o.endTask)()},t.onerror=o.endTask,t.readAsDataURL(e)}function n(e){if((0,o.startTask)(),console.log("trying to load file as image"),d){var t=new Image;t.onload=function(){d=!1,i(t,u),(0,o.endTask)()},t.onerror=o.endTask,t.src=e}}function r(e){var o=Array.prototype.find.call(e,function(e){return"file"==e.kind&&e.type.match("image")});if(u="pasted-image",o)return console.log("parsing pasted image content"),void t(o.getAsFile());var r=Array.prototype.find.call(e,function(e){return"string"==e.kind});r&&(console.log("parsing url content"),r.getAsString(function(e){return n(e)}))}var i=e.onImageCreated,a=e.fileinput,u="pasted-image",d=!0;!function(){function e(n){a.removeEventListener("change",e),u=a.value.split("\\").pop().split(".")[0]||"image",t(n.target.files[0])}a.addEventListener("change",e)}(),window.addEventListener("paste",function(e){r(e.clipboardData.items)}),document.body.addEventListener("dragover",function(e){e.preventDefault(),e.stopPropagation()}),document.body.addEventListener("drop",function(e){e.preventDefault(),e.stopPropagation(),r(e.dataTransfer.items)})};var o=n(7)},function(e,t,n){"use strict";function o(){a++,i()}function r(){a--,setTimeout(i)}function i(){spinners.classList[a?"remove":"add"]("hidden")}Object.defineProperty(t,"__esModule",{value:!0}),t.startTask=o,t.endTask=r,t.updateLook=i;var a=0;document.addEventListener("DOMContentLoaded",i)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){function n(){i++,localStorage.setItem("background",i),o()}function o(){var t=["#FFF","#333"],n=i%t.length;e.style.backgroundColor=t[n],r(n),console.log(0==n?"jour !":"nuit !")}var r=t.onChange,i=localStorage.getItem("background")||0;o(),e.addEventListener("click",n)}},function(e,t,n){"use strict";function o(e){if(null==e)throw new TypeError("Cannot destructure undefined")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){function n(){s=e.getBoundingClientRect(),l=s.width/e.width}function r(e){return{x:(e.clientX-s.left)/l,y:(e.clientY-s.top)/l}}function i(){m||(m=!0,f.beginPath(),u())}function a(){m=!1}function u(){m&&(window.requestAnimationFrame(u),d())}function d(){f.moveTo(g.x,g.y),f.lineTo(v.x,v.y),f.stroke(),g=v}function c(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;e.addEventListener(t,function(e){e.preventDefault();var t=e.touches[0]||{},r=t.clientX,i=t.clientY,a=new MouseEvent(n,{clientX:r,clientY:i});o.dispatchEvent(a)},!1)}o(t);var l=void 0,s=void 0;n(),window.addEventListener("resize",n);var f=e.getContext("2d");f.lineCap="round";var v={x:0,y:0},g=v;e.addEventListener("mousedown",function(e){v=g=r(e),i()},!1),document.addEventListener("mouseup",a,!1),e.addEventListener("mousemove",function(e){v=r(e)},!1);var m=!1;return c("touchstart","mousedown"),c("touchend","mouseup",document),c("touchmove","mousemove"),{drawWithEraser:function(){f.globalCompositeOperation="destination-out"},drawWithColor:function(e){f.globalCompositeOperation="source-over",f.strokeStyle=e},setPencilSize:function(e){f.lineWidth=e/l}}}},function(e,t,n){"use strict";function o(e,t){var n=document.createElement("canvas");n.width=e.width,n.height=e.height;var o=n.getContext("2d");return o.drawImage(t,0,0,n.width,n.height),o.drawImage(e,0,0),n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){function n(e){var t=a+"-minimage-"+u+".png";this.href=o(i,r).toDataURL("image/png",.5),this.download=t,u++}var r=t.OrginalImage,i=t.canvas,a=t.originalFileName,u=0;e.addEventListener("click",n,!1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){function n(t){e.value=t,localStorage.setItem("pensize",t),o(t)}var o=t.onChange;e.addEventListener("input",function(e){return n(e.target.value)}),n(parseInt(localStorage.getItem("pensize"))||DEFAULTSIZE)}},function(e,t,n){"use strict";function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="#F44336,#E91E63,#9C27B0,#673AB7,#3F51B5,#2196F3,#03A9F4,#00BCD4,#009688,#4CAF50,#8BC34A,#CDDC39,#FFEB3B,#FFC107,#FF9800,#FF5722".split(",").filter(function(t){return t!=e});return t[Math.floor(Math.random()*(t.length+.99))]}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(){c=e.width=window.innerWidth,l=e.height=window.innerHeight,d=e.getContext("2d"),d.fillStyle=s,d.fillRect(0,0,c,l),d.lineCap="round"}function n(){f={x:c/2,y:l/2},v={x:10*Math.random()-5,y:10*Math.random()-5},g={x:10*Math.random()-5,y:10*Math.random()-5},d.strokeStyle=o(s),d.lineWidth=20+40*Math.random(),d.beginPath(),d.moveTo(f.x,f.y)}function r(){g={x:2*Math.random()-1,y:2*Math.random()-1},m=setTimeout(r,100+200*Math.random())}function i(){d.moveTo(f.x,f.y),v.x*=.95,v.y*=.95,v.x+=g.x,v.y+=g.y,f.x+=v.x,f.y+=v.y,d.lineTo(f.x,f.y),d.stroke(),(f.x<-50||f.x>c+50||f.y<-50||f.y>l+50)&&n()}function a(){p&&(window.requestAnimationFrame(a),i())}function u(){p=!1,clearTimeout(m),window.removeEventListener("resize",t)}var d=void 0,c=void 0,l=void 0,s=o();t(),window.addEventListener("resize",t);var f=void 0,v=void 0,g=void 0,m=void 0;n(),r();var p=!0;return a(),{stopAnim:u}}}]);
//# sourceMappingURL=bundle.js.map