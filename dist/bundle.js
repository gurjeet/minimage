!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){function t(e){"eraser"==e?d():u(e)}w=e;var n=h("drawzone");h("drawzoneWrapper").appendChild(e),h("inputForAFile").style.display="none",h("drawAndDownload").style.display="";var r=Math.max(window.innerHeight,window.innerWidth),o=Math.max(e.width/r,e.height/r,1);e.style.maxWidth=n.width=e.width/o,e.style.maxHeight=n.height=e.height/o;var a=(n.getContext("2d"),(0,f.default)(n,{})),u=a.drawWithColor,d=a.drawWithEraser,c=a.setPencilSize,l=h("background"),g=(0,i.default)(h("pensizePreview"),{onColorChange:t,elementToContrastWith:l}),p=g.setColorDotSize,C=g.refreshColorPreviewBorder;(0,s.default)(l,{onChange:C}),(0,m.default)(h("pensize"),{onChange:function(e){p(e),c(e)}}),(0,v.default)(h("download"),{OrginalImage:w,originalFileName:y,canvas:n})}n(2);var a=n(3),i=r(a),u=n(5),d=r(u),c=n(7),s=r(c),l=n(8),f=r(l),g=n(9),v=r(g),p=n(10),m=r(p),h=document.getElementById.bind(document),y=void 0,w=void 0;(0,d.default)({fileinput:h("fileinput"),onImageCreated:function(e,t){y=t,o(e)}})},function(e,t){},function(e,t,n){"use strict";function r(e){return(0,d.default)(e).reduce(function(e,t){return e+t},0)/3}function o(e,t){if("eraser"==e)return"transparent";var n=r(t),o=r(e);return n>125&&o>200?"black":n<125&&o<25?"white":"transparent"}function a(e){return r(e)>127.5?"rgba(0,0,0,0.8)":"rgba(255,255,255,0.8)"}function i(e,t){function n(e){r(),t(e)}function r(){o.classList.add("closing"),setTimeout(function(){return document.body.removeChild(o)},300)}var o=document.createElement("div");o.classList.add("modal"),document.body.appendChild(o),s.forEach(function(t){var r=document.createElement("button");r.classList.add("colorbutton"),t===e&&(r.classList.add("active"),r.innerHTML="Selected",r.style.color=a(t)),r.style.backgroundColor=t.toLowerCase(),r.addEventListener("click",function(){return n(t)}),o.appendChild(r)});var i=document.createElement("button");i.classList.add("eraser"),i.addEventListener("click",function(){return n("eraser")}),i.innerHTML='<img src="/images/eraser-color.svg"/><span class="imagelabel">'+("eraser"===e?"Eraser selected":"Eraser")+"</span>",o.appendChild(i)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){function n(){s.style.border="1px solid "+o(l,d.style.backgroundColor)}function r(e){l=e,"eraser"==e?(s.style.background="",s.classList.add("eraser")):(s.classList.remove("eraser"),s.style.background=e,localStorage.setItem("color",e),n()),u(e)}function a(e){s.style.transform="scale("+e/10+")"}var u=t.onColorChange,d=t.elementToContrastWith,s=e.children[0],l=void 0;return e.addEventListener("click",function(){return i(l,r)}),setTimeout(function(){return r(localStorage.getItem("color")||c)}),{setColorDotSize:a,refreshColorPreviewBorder:n}};var u=n(4),d=function(e){return e&&e.__esModule?e:{default:e}}(u),c="#2b76ce",s="#000000,#FFFFFF,#F44336,#E91E63,#9C27B0,#673AB7,#3F51B5,#2196F3,#03A9F4,#00BCD4,#009688,#4CAF50,#8BC34A,#CDDC39,#FFEB3B,#FFC107,#FF9800,#FF5722,#795548,#9E9E9E,#607D8B".split(",")},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e){var t=document.createElement("canvas");t.width=t.height=1;var n=t.getContext("2d");return n.clearRect(0,0,1,1),n.fillStyle=e,n.fillRect(0,0,1,1),[].concat(r(n.getImageData(0,0,1,1).data)).slice(0,3)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(e){(0,r.startTask)();var t=new FileReader;t.onload=function(){n(t.result),(0,r.endTask)()},t.onerror=r.endTask,t.readAsDataURL(e)}function n(e){if((0,r.startTask)(),console.log("trying to load file as image"),d){var t=new Image;t.onload=function(){d=!1,a(t,u),(0,r.endTask)()},t.onerror=r.endTask,t.src=e}}function o(e){var r=Array.prototype.find.call(e,function(e){return"file"==e.kind&&e.type.match("image")});if(u="pasted-image",r)return console.log("parsing pasted image content"),void t(r.getAsFile());var o=Array.prototype.find.call(e,function(e){return"string"==e.kind});o&&(console.log("parsing url content"),o.getAsString(function(e){return n(e)}))}var a=e.onImageCreated,i=e.fileinput,u="pasted-image",d=!0;!function(){function e(n){i.removeEventListener("change",e),u=i.value.split("\\").pop().split(".")[0]||"image",t(n.target.files[0])}i.addEventListener("change",e)}(),window.addEventListener("paste",function(e){o(e.clipboardData.items)}),document.body.addEventListener("dragover",function(e){e.preventDefault(),e.stopPropagation()}),document.body.addEventListener("drop",function(e){e.preventDefault(),e.stopPropagation(),o(e.dataTransfer.items)})};var r=n(6)},function(e,t,n){"use strict";function r(){i++,a()}function o(){i--,setTimeout(a)}function a(){spinners.classList[i?"remove":"add"]("hidden")}Object.defineProperty(t,"__esModule",{value:!0}),t.startTask=r,t.endTask=o,t.updateLook=a;var i=0;document.addEventListener("DOMContentLoaded",a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){function n(){a++,localStorage.setItem("background",a),r()}function r(){var t=["#FFF","#333"],n=a%t.length;e.style.backgroundColor=t[n],o(n),console.log(0==n?"jour !":"nuit !")}var o=t.onChange,a=localStorage.getItem("background")||0;r(),e.addEventListener("click",n)}},function(e,t,n){"use strict";function r(e){if(null==e)throw new TypeError("Cannot destructure undefined")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){function n(){l=e.getBoundingClientRect(),s=l.width/e.width}function o(e){return{x:(e.clientX-l.left)/s,y:(e.clientY-l.top)/s}}function a(){p||(p=!0,f.beginPath(),u())}function i(){p=!1}function u(){p&&(window.requestAnimationFrame(u),d())}function d(){f.moveTo(v.x,v.y),f.lineTo(g.x,g.y),f.stroke(),v=g}function c(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;e.addEventListener(t,function(e){e.preventDefault();var t=e.touches[0]||{},o=t.clientX,a=t.clientY,i=new MouseEvent(n,{clientX:o,clientY:a});r.dispatchEvent(i)},!1)}r(t);var s=void 0,l=void 0;n(),window.addEventListener("resize",n);var f=e.getContext("2d");f.lineCap="round";var g={x:0,y:0},v=g;e.addEventListener("mousedown",function(e){g=v=o(e),a()},!1),document.addEventListener("mouseup",i,!1),e.addEventListener("mousemove",function(e){g=o(e)},!1);var p=!1;return c("touchstart","mousedown"),c("touchend","mouseup",document),c("touchmove","mousemove"),{drawWithEraser:function(){f.globalCompositeOperation="destination-out"},drawWithColor:function(e){f.globalCompositeOperation="source-over",f.strokeStyle=e},setPencilSize:function(e){f.lineWidth=e/s}}}},function(e,t,n){"use strict";function r(e,t){var n=document.createElement("canvas");n.width=e.width,n.height=e.height;var r=n.getContext("2d");return r.drawImage(t,0,0,n.width,n.height),r.drawImage(e,0,0),n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){function n(e){var t=i+"-minimage-"+u+".png";this.href=r(a,o).toDataURL("image/png",.5),this.download=t,u++}var o=t.OrginalImage,a=t.canvas,i=t.originalFileName,u=0;e.addEventListener("click",n,!1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){function n(t){e.value=t,localStorage.setItem("pensize",t),r(t)}var r=t.onChange;e.addEventListener("input",function(e){return n(e.target.value)}),n(parseInt(localStorage.getItem("pensize"))||DEFAULTSIZE)}}]);
//# sourceMappingURL=bundle.js.map