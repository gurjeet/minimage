!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e){var t=Array.prototype.find.call(e,function(e){return"file"==e.kind&&e.type.match("image")});if(p="pasted-image",t)return console.log("parsing pasted image content"),void a(t.getAsFile());var n=Array.prototype.find.call(e,function(e){return"string"==e.kind});n&&(console.log("parsing url content"),n.getAsString(function(e){return c(e)}))}function i(){function e(n){t.removeEventListener("change",e),p=t.value.split("\\").pop().split(".")[0]||"image",a(n.target.files[0])}var t=f("fileinput");t.addEventListener("change",e)}function a(e){f("readme").innerHTML="<h1>Loading ...</h1>";var t=new FileReader;t.onload=function(){return c(t.result)},t.readAsDataURL(e)}function c(e){if(console.log("trying to load file as image"),m){var t=new Image;t.onload=function(){return u(t)},t.src=e}}function u(e){function t(){A=b.getBoundingClientRect(),x=A.width/b.width}function n(e){I.style.background=k.strokeStyle=D.value=e,localStorage.setItem("color",e),o()}function o(){var e=f("pensizePreviewDot");e.style.border="1px solid "+s(e.style.backgroundColor,f("background").style.backgroundColor)}function r(e){I.style.transform="scale("+e/10+")",k.lineWidth=e/x,S.value=e,localStorage.setItem("pensize",e)}function i(e){return{x:(e.clientX-A.left)/x,y:(e.clientY-A.top)/x}}function a(){F||(F=!0,k.beginPath(),u())}function c(){F=!1}function u(){F&&(window.requestAnimationFrame(u),d())}function d(){k.moveTo(C.x,C.y),k.lineTo(z.x,z.y),k.stroke(),C=z}function l(e,t){b.addEventListener(e,function(e){e.preventDefault();var n=e.touches[0]||{},o=n.clientX,r=n.clientY,i=new MouseEvent(t,{clientX:o,clientY:r});b.dispatchEvent(i)},!1)}function h(e){var t=p+"-minimage-"+P+".png";this.href=b.toDataURL("image/png",.5),this.download=t,P++}function w(){R++,localStorage.setItem("background",R),y()}function y(){var e=["#FFF","#333"];M.style.backgroundColor=e[R%e.length],o()}m=!1;var b=f("drawzone");f("inputForAFile").style.display="none",f("drawAndDownload").style.display="";var L=Math.max(window.innerHeight,window.innerWidth),E=Math.max(e.width/L,e.height/L,1);b.width=e.width/E,b.height=e.height/E;var k=b.getContext("2d");k.drawImage(e,0,0,b.width,b.height);var x=void 0,A=void 0;t(),window.addEventListener("resize",t);var D=f("colorpicker"),I=(f("pensizePreview"),f("pensizePreviewDot")),S=f("pensize");n(localStorage.getItem("color")||g),D.addEventListener("input",function(e){return n(e.target.value)}),S.addEventListener("input",function(e){return r(e.target.value)}),r(parseInt(localStorage.getItem("pensize"))||v),k.lineCap="round";var z={x:0,y:0},C=z;b.addEventListener("mousedown",function(e){z=C=i(e),a()},!1),document.addEventListener("mouseup",c,!1),b.addEventListener("mousemove",function(e){z=i(e)},!1);var F=!1;l("touchstart","mousedown"),l("touchend","mouseup"),l("touchmove","mousemove");var P=0;f("download").addEventListener("click",h,!1);var M=f("background"),R=localStorage.getItem("background")||0;y(),M.addEventListener("click",w)}function d(e){var t=document.createElement("canvas");t.width=t.height=1;var n=t.getContext("2d");return n.clearRect(0,0,1,1),n.fillStyle=e,n.fillRect(0,0,1,1),[].concat(o(n.getImageData(0,0,1,1).data))}function l(e){return d(e).slice(0,3).reduce(function(e,t){return e+t},0)/3}function s(e,t){var n=l(t),o=l(e);return n>125&&o>200?"black":n<125&&o<25?"white":"transparent"}n(2),document.addEventListener("DOMContentLoaded",function(){i()}),window.addEventListener("paste",function(e){r(e.clipboardData.items)}),document.body.addEventListener("dragover",function(e){e.preventDefault(),e.stopPropagation()}),document.body.addEventListener("drop",function(e){e.preventDefault(),e.stopPropagation(),r(e.dataTransfer.items)});var f=document.getElementById.bind(document),g="#2b76ce",v=20,p="pasted-image",m=!0},function(e,t){}]);
//# sourceMappingURL=bundle.js.map