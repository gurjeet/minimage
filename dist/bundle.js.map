{"version":3,"sources":["webpack:///bundle.js","webpack:///webpack/bootstrap d88c8bd1b8e8d15279e0","webpack:///./src/app.js","webpack:///./src/colorPicker.js","webpack:///./src/colorToRGB.js","webpack:///./src/palette.js","webpack:///./src/getAnImage.js","webpack:///./src/spinners.js","webpack:///./src/toggleAbleBackground.js","webpack:///./src/editableCanvas.js","webpack:///./src/canvasMergerAndDonwloaderLink.js","webpack:///./src/pencilSizeSlider.js","webpack:///./src/welcomeAnim.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_interopRequireDefault","obj","default","letUserDrawAndDownload","img","setColor","color","drawWithEraser","drawWithColor","OrginalImage","stopAnim","canvas","byId","drawzoneWrapper","appendChild","style","display","maxRes","Math","max","window","innerHeight","innerWidth","imgScale","width","height","maxWidth","maxHeight","hasDoneFirstDraw","getContext","_setupEditableCanvas","_editableCanvas2","onMouseUp","download","classList","add","setPencilSize","background","_setupColorPicker","_colorPicker2","canvasForCursor","onColorChange","elementToContrastWith","setColorDotSize","refreshColorPreviewBorder","_toggleAbleBackground2","onChange","_pencilSizeSlider2","pxSize","_canvasMergerAndDonwloaderLink2","originalFileName","_colorPicker","_getAnImage","_getAnImage2","_toggleAbleBackground","_editableCanvas","_canvasMergerAndDonwloaderLink","_pencilSizeSlider","_welcomeAnim2","_welcomeAnim3","document","getElementById","bind","fileinput","onImageCreated","filename","_welcomeAnim","luminance","_colorToRGB2","reduce","a","b","borderColor","foreground","bgL","fgL","textColor","openColorPicker","currentColor","callback","pickColor","closeModal","modal","setTimeout","body","removeChild","createElement","_palette","paletteColors","forEach","button","innerHTML","backgroundColor","toLowerCase","addEventListener","eraser","setCursor","node","size","ctx","drawEraser","drawColorCircle","cursor","toDataURL","beginPath","arc","PI","fillStyle","fill","fillRect","globalCompositeOperation","value","pensizePreview","_ref","pensizePreviewDot","border","onColorPicked","currentSize","remove","localStorage","setItem","transform","children","getItem","DEFAULTCOLOR","_colorToRGB","_toConsumableArray","arr","Array","isArray","arr2","length","from","colorToRGB","clearRect","concat","getImageData","data","slice","split","loadFile","fileToLoad","_spinners","startTask","fileReader","FileReader","onload","createImageWithFileContent","result","endTask","onerror","readAsDataURL","console","log","askingForImage","Image","src","handleDataTransferItems","items","imageFile","find","e","kind","type","match","getAsFile","url","getAsString","fileChanged","changeEvent","removeEventListener","pop","target","files","ev","clipboardData","preventDefault","stopPropagation","dataTransfer","tasksInProgress","updateLook","spinners","switchBackground","currentMode","applyBackground","options","current","bclass","index","measureScale","rect","getBoundingClientRect","scale","getMousePos","mouseEvent","x","clientX","left","y","clientY","top","startDrawLoop","isDrawing","drawLoop","endDrawLoop","requestAnimationFrame","renderCanvas","moveTo","lastPos","lineTo","mousePos","stroke","proxyTouchToMouse","touchEventName","mouseEventName","eventTarget","arguments","undefined","_ref2","touches","MouseEvent","dispatchEvent","lineCap","strokeStyle","lineWidth","mergeCanvasAndImage","clone","drawImage","link","downloadImage","downloadCounter","this","href","slider","onPencilSizeChange","parseInt","DEFAULTSIZE","randomColor","exception","pal","filter","floor","random","reset","w","h","bgColor","randomizeInst","position","speed","acceleration","randomAcceletation","accelerationTimeoutHandle","clearTimeout"],"mappings":"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","file":"bundle.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/dist/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(1);\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n__webpack_require__(2);\n\nvar _colorPicker = __webpack_require__(3);\n\nvar _colorPicker2 = _interopRequireDefault(_colorPicker);\n\nvar _getAnImage = __webpack_require__(6);\n\nvar _getAnImage2 = _interopRequireDefault(_getAnImage);\n\nvar _toggleAbleBackground = __webpack_require__(8);\n\nvar _toggleAbleBackground2 = _interopRequireDefault(_toggleAbleBackground);\n\nvar _editableCanvas = __webpack_require__(9);\n\nvar _editableCanvas2 = _interopRequireDefault(_editableCanvas);\n\nvar _canvasMergerAndDonwloaderLink = __webpack_require__(10);\n\nvar _canvasMergerAndDonwloaderLink2 = _interopRequireDefault(_canvasMergerAndDonwloaderLink);\n\nvar _pencilSizeSlider = __webpack_require__(11);\n\nvar _pencilSizeSlider2 = _interopRequireDefault(_pencilSizeSlider);\n\nvar _welcomeAnim2 = __webpack_require__(12);\n\nvar _welcomeAnim3 = _interopRequireDefault(_welcomeAnim2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*\n\nSee the app in action here : https://minimage.tk\n\n*/\nvar byId = document.getElementById.bind(document),\n    DEFAULTSIZE = 20;\n\nvar originalFileName = void 0,\n    OrginalImage = void 0;\n(0, _getAnImage2.default)({\n  fileinput: byId(\"fileinput\"),\n  onImageCreated: function onImageCreated(img, filename) {\n    originalFileName = filename;\n    letUserDrawAndDownload(img);\n  }\n});\n\nvar _welcomeAnim = (0, _welcomeAnim3.default)(byId(\"welcome\")),\n    stopAnim = _welcomeAnim.stopAnim;\n\n// Lets the user draw on the loaded image\n\n\nfunction letUserDrawAndDownload(img) {\n  OrginalImage = img;\n  stopAnim();\n  var canvas = byId(\"drawzone\"),\n      drawzoneWrapper = byId(\"drawzoneWrapper\");\n  drawzoneWrapper.appendChild(img);\n\n  // Switch to drawing mode\n  byId(\"inputForAFile\").style.display = \"none\";\n  byId(\"drawAndDownload\").style.display = \"\";\n\n  // Fits the canvas to screen\n  var maxRes = Math.max(window.innerHeight, window.innerWidth);\n  var imgScale = Math.max(img.width / maxRes, img.height / maxRes, 1);\n  img.width = canvas.width = img.width / imgScale;\n  img.height = canvas.height = img.height / imgScale;\n  drawzoneWrapper.style.maxWidth = img.width;\n  drawzoneWrapper.style.maxHeight = img.height;\n\n  var ctx = canvas.getContext(\"2d\");\n  var hasDoneFirstDraw = false;\n\n  var _setupEditableCanvas = (0, _editableCanvas2.default)(canvas, {\n    onMouseUp: function onMouseUp() {\n      if (!hasDoneFirstDraw) {\n        hasDoneFirstDraw = true;\n        download.classList.add(\"usable\");\n      }\n    }\n  }),\n      drawWithColor = _setupEditableCanvas.drawWithColor,\n      drawWithEraser = _setupEditableCanvas.drawWithEraser,\n      setPencilSize = _setupEditableCanvas.setPencilSize;\n\n  // Sets draw color at load and when user clicks color input\n\n\n  function setColor(color) {\n    if (color == \"eraser\") {\n      drawWithEraser();\n    } else {\n      drawWithColor(color);\n    }\n  }\n\n  var background = byId(\"background\");\n\n  var _setupColorPicker = (0, _colorPicker2.default)(byId(\"pensizePreview\"), {\n    canvasForCursor: canvas,\n    onColorChange: setColor,\n    elementToContrastWith: background\n  }),\n      setColorDotSize = _setupColorPicker.setColorDotSize,\n      refreshColorPreviewBorder = _setupColorPicker.refreshColorPreviewBorder;\n  // Tap the background to switch its color (usefull for transparent images)\n\n\n  (0, _toggleAbleBackground2.default)(background, { onChange: refreshColorPreviewBorder });\n\n  (0, _pencilSizeSlider2.default)(byId(\"pensize\"), {\n    onChange: function onChange(pxSize) {\n      setColorDotSize(pxSize);\n      setPencilSize(pxSize);\n    }\n  });\n\n  (0, _canvasMergerAndDonwloaderLink2.default)(byId(\"download\"), {\n    OrginalImage: OrginalImage,\n    originalFileName: originalFileName,\n    canvas: canvas\n  });\n}\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (pensizePreview, _ref) {\n  var onColorChange = _ref.onColorChange,\n      elementToContrastWith = _ref.elementToContrastWith,\n      canvasForCursor = _ref.canvasForCursor;\n\n  var pensizePreviewDot = pensizePreview.children[0];\n\n  function refreshColorPreviewBorder() {\n    pensizePreviewDot.style.border = \"1px solid \" + borderColor(currentColor, elementToContrastWith.style.backgroundColor);\n  }\n\n  var currentColor = void 0;\n  pensizePreview.addEventListener(\"click\", function () {\n    return openColorPicker(currentColor, onColorPicked);\n  });\n  function onColorPicked(color) {\n    currentColor = color;\n    setCursor(canvasForCursor, currentSize, currentColor);\n    if (color == \"eraser\") {\n      pensizePreviewDot.style.background = \"\";\n      pensizePreviewDot.classList.add(\"eraser\");\n    } else {\n      pensizePreviewDot.classList.remove(\"eraser\");\n      pensizePreviewDot.style.background = color;\n      localStorage.setItem(\"color\", color);\n      refreshColorPreviewBorder();\n    }\n    onColorChange(color);\n  }\n  var currentSize = void 0;\n  function setColorDotSize(pxSize) {\n    currentSize = pxSize;\n    setCursor(canvasForCursor, currentSize, currentColor);\n    pensizePreviewDot.style.transform = \"scale(\" + pxSize / 10 + \")\";\n  }\n\n  setTimeout(function () {\n    return onColorPicked(localStorage.getItem(\"color\") || DEFAULTCOLOR);\n  });\n\n  return {\n    setColorDotSize: setColorDotSize,\n    refreshColorPreviewBorder: refreshColorPreviewBorder\n  };\n};\n\nvar _colorToRGB = __webpack_require__(4);\n\nvar _colorToRGB2 = _interopRequireDefault(_colorToRGB);\n\nvar _palette = __webpack_require__(5);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar DEFAULTCOLOR = \"#2b76ce\";\n\n\nfunction luminance(color) {\n  return (0, _colorToRGB2.default)(color).reduce(function (a, b) {\n    return a + b;\n  }, 0) / 3;\n  pickColor;\n}\n\nfunction borderColor(foreground, background) {\n  if (foreground == \"eraser\") return \"transparent\";\n  var bgL = luminance(background);\n  var fgL = luminance(foreground);\n  if (bgL > 125 && fgL > 200) return \"black\";\n  if (bgL < 125 && fgL < 25) return \"white\";\n  return \"transparent\";\n}\n\nfunction textColor(background) {\n  return luminance(background) > 255 / 2 ? \"rgba(0,0,0,0.8)\" : \"rgba(255,255,255,0.8)\";\n}\n\nfunction openColorPicker(currentColor, callback) {\n  var modal = document.createElement(\"div\");\n  modal.classList.add(\"modal\");\n  document.body.appendChild(modal);\n\n  function pickColor(color) {\n    closeModal();\n    callback(color);\n  }\n\n  _palette.paletteColors.forEach(function (color) {\n    var button = document.createElement(\"button\");\n    button.classList.add(\"colorbutton\");\n    if (color === currentColor) {\n      button.classList.add(\"active\");\n      button.innerHTML = \"Selected\";\n      button.style.color = textColor(color);\n    }\n    button.style.backgroundColor = color.toLowerCase();\n    button.addEventListener(\"click\", function () {\n      return pickColor(color);\n    });\n    modal.appendChild(button);\n  });\n\n  var eraser = document.createElement(\"button\");\n  eraser.classList.add(\"eraser\");\n  eraser.addEventListener(\"click\", function () {\n    return pickColor(\"eraser\");\n  });\n  eraser.innerHTML = '<img src=\"/images/eraser-color.svg\"/><span class=\"imagelabel\">' + (\"eraser\" === currentColor ? \"Eraser selected\" : \"Eraser\") + \"</span>\";\n  modal.appendChild(eraser);\n\n  function closeModal() {\n    modal.classList.add(\"closing\");\n    setTimeout(function () {\n      return document.body.removeChild(modal);\n    }, 300);\n  }\n}\n\nfunction setCursor(node, size, color) {\n  var s = size < 4 ? 4 : size;\n  var c = document.createElement(\"canvas\");\n  c.width = c.height = s;\n  var ctx = c.getContext(\"2d\");\n  if (color == \"eraser\") drawEraser(ctx, s);else drawColorCircle(ctx, s, color);\n  var cursor = c.toDataURL(\"image/png\");\n  node.style.cursor = \"url(\" + cursor + \") \" + s / 2 + \" \" + s / 2 + \",auto\";\n}\n\nfunction drawColorCircle(ctx, s, color) {\n  ctx.beginPath();\n  ctx.arc(s / 2, s / 2, s / 2, 0, 2 * Math.PI, false);\n  ctx.fillStyle = color;\n  ctx.fill();\n}\n\nfunction drawEraser(ctx, s) {\n  ctx.fillStyle = \"#da502d\";\n  ctx.fillRect(0, 0, s * 2 / 3, s);\n  ctx.fillStyle = \"#6584a5\";\n  ctx.fillRect(s * 2 / 3, 0, s, s);\n  ctx.globalCompositeOperation = \"destination-in\";\n  drawColorCircle(ctx, s, \"white\");\n}\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = colorToRGB;\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction colorToRGB(color) {\n  var canvas = document.createElement(\"canvas\");\n  canvas.width = canvas.height = 1;\n  var ctx = canvas.getContext(\"2d\");\n  ctx.clearRect(0, 0, 1, 1);\n  ctx.fillStyle = color;\n  ctx.fillRect(0, 0, 1, 1);\n  return [].concat(_toConsumableArray(ctx.getImageData(0, 0, 1, 1).data)).slice(0, 3);\n}\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar paletteColors = exports.paletteColors = \"#000000,#FFFFFF,#F44336,#E91E63,#9C27B0,#673AB7,#3F51B5,#2196F3,#03A9F4,#00BCD4,#009688,#4CAF50,#8BC34A,#CDDC39,#FFEB3B,#FFC107,#FF9800,#FF5722,#795548,#9E9E9E,#607D8B\".split(\",\");\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (_ref) {\n  var onImageCreated = _ref.onImageCreated,\n      fileinput = _ref.fileinput;\n\n  // Callbacks onImageCreated with img tag and filename\n  var originalFileName = \"pasted-image\";\n  var askingForImage = true;\n\n  // Transforms the file input content to a real image\n  function loadFile(fileToLoad) {\n    (0, _spinners.startTask)();\n    var fileReader = new FileReader();\n    fileReader.onload = function () {\n      createImageWithFileContent(fileReader.result);\n      (0, _spinners.endTask)();\n    };\n    fileReader.onerror = _spinners.endTask;\n    fileReader.readAsDataURL(fileToLoad);\n  }\n\n  function createImageWithFileContent(result) {\n    (0, _spinners.startTask)();\n    console.log(\"trying to load file as image\");\n    if (!askingForImage) return;\n    var img = new Image();\n    img.onload = function () {\n      askingForImage = false;\n      onImageCreated(img, originalFileName);\n      (0, _spinners.endTask)();\n    };\n    img.onerror = _spinners.endTask;\n    img.src = result;\n  }\n\n  // Setup of the welcome  UI\n  function askForImage() {\n    fileinput.addEventListener(\"change\", fileChanged);\n    function fileChanged(changeEvent) {\n      fileinput.removeEventListener(\"change\", fileChanged);\n      originalFileName = fileinput.value.split(\"\\\\\").pop().split(\".\")[0] || \"image\";\n      loadFile(changeEvent.target.files[0]);\n    }\n  }\n\n  askForImage();\n\n  window.addEventListener(\"paste\", function (ev) {\n    handleDataTransferItems(ev.clipboardData.items);\n  });\n\n  document.body.addEventListener(\"dragover\", function (ev) {\n    ev.preventDefault();\n    ev.stopPropagation();\n  });\n  document.body.addEventListener(\"drop\", function (ev) {\n    ev.preventDefault();\n    ev.stopPropagation();\n    handleDataTransferItems(ev.dataTransfer.items);\n  });\n\n  function handleDataTransferItems(items) {\n    // Tries to paste an image\n    var imageFile = Array.prototype.find.call(items, function (e) {\n      return e.kind == \"file\" && e.type.match(\"image\");\n    });\n    originalFileName = \"pasted-image\";\n    if (imageFile) {\n      console.log(\"parsing pasted image content\");\n      loadFile(imageFile.getAsFile());\n      return;\n    }\n    // Tries to load a remote image given its adress\n    var url = Array.prototype.find.call(items, function (e) {\n      return e.kind == \"string\";\n    });\n    if (url) {\n      console.log(\"parsing url content\");\n      url.getAsString(function (s) {\n        return createImageWithFileContent(s);\n      });\n    }\n  }\n};\n\nvar _spinners = __webpack_require__(7);\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.startTask = startTask;\nexports.endTask = endTask;\nexports.updateLook = updateLook;\nvar tasksInProgress = 0;\nfunction startTask() {\n  tasksInProgress++;\n  updateLook();\n}\n\nfunction endTask() {\n  tasksInProgress--;\n  setTimeout(updateLook);\n}\n\nfunction updateLook() {\n  spinners.classList[tasksInProgress ? \"remove\" : \"add\"](\"hidden\");\n}\ndocument.addEventListener(\"DOMContentLoaded\", updateLook);\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (background, _ref) {\n  var onChange = _ref.onChange;\n\n  function switchBackground() {\n    currentMode++;\n    localStorage.setItem(\"background\", currentMode);\n    applyBackground();\n  }\n  function applyBackground() {\n    var options = [\"#FFF\", \"#333\"];\n    var current = currentMode % options.length;\n    background.style.backgroundColor = options[current];\n    onChange(current);\n\n    var bclass = document.body.classList;\n    options.forEach(function (color, index) {\n      return bclass.remove(\"background_n_\" + index);\n    });\n    bclass.add(\"background_n_\" + current);\n    // https://www.youtube.com/watch?v=Pr8ETbGz35Q\n    console.log(current == 0 ? \"jour !\" : \"nuit !\");\n  }\n  var currentMode = localStorage.getItem(\"background\") || 0;\n  applyBackground();\n  background.addEventListener(\"click\", switchBackground);\n};\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (canvas, _ref) {\n  var onMouseUp = _ref.onMouseUp;\n\n  // We cache some zoom related data to avoid getting them all the time\n  var scale = void 0,\n      rect = void 0;\n  function measureScale() {\n    rect = canvas.getBoundingClientRect();\n    scale = rect.width / canvas.width;\n  }\n  measureScale();\n  window.addEventListener(\"resize\", measureScale);\n\n  var ctx = canvas.getContext(\"2d\");\n\n  // To make the lines look slightly nicer\n  ctx.lineCap = \"round\";\n\n  // We cache the mouse position and previous mouse position.\n  // Theay are defined by touch events, and used by the draw loop\n  var mousePos = {\n    x: 0,\n    y: 0\n  },\n      lastPos = mousePos;\n\n  canvas.addEventListener(\"mousedown\", function (e) {\n    mousePos = lastPos = getMousePos(e);\n    startDrawLoop();\n  }, false);\n\n  document.addEventListener(\"mouseup\", endDrawLoop, false);\n\n  canvas.addEventListener(\"mousemove\", function (e) {\n    mousePos = getMousePos(e);\n  }, false);\n\n  // Get the position of the mouse relative to the canvas\n  function getMousePos(mouseEvent) {\n    return {\n      x: (mouseEvent.clientX - rect.left) / scale,\n      y: (mouseEvent.clientY - rect.top) / scale\n    };\n  }\n\n  // Drawing loop is separated from the events￼\n\n  var isDrawing = false;\n\n  function startDrawLoop() {\n    if (isDrawing) return;\n    isDrawing = true;\n    ctx.beginPath();\n    drawLoop();\n  }\n  function endDrawLoop() {\n    isDrawing && onMouseUp();\n    isDrawing = false;\n  }\n\n  function drawLoop() {\n    if (isDrawing) {\n      window.requestAnimationFrame(drawLoop);\n      renderCanvas();\n    }\n  }\n  function renderCanvas() {\n    ctx.moveTo(lastPos.x, lastPos.y);\n    ctx.lineTo(mousePos.x, mousePos.y);\n    ctx.stroke();\n    lastPos = mousePos;\n  }\n\n  // Proxy mobile events to their mouse counterpart\n  function proxyTouchToMouse(touchEventName, mouseEventName) {\n    var eventTarget = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : canvas;\n\n    canvas.addEventListener(touchEventName, function (e) {\n      e.preventDefault();\n\n      var _ref2 = e.touches[0] || {},\n          clientX = _ref2.clientX,\n          clientY = _ref2.clientY;\n\n      var mouseEvent = new MouseEvent(mouseEventName, {\n        clientX: clientX,\n        clientY: clientY\n      });\n      eventTarget.dispatchEvent(mouseEvent);\n    }, false);\n  }\n  proxyTouchToMouse(\"touchstart\", \"mousedown\");\n  proxyTouchToMouse(\"touchend\", \"mouseup\", document);\n  proxyTouchToMouse(\"touchmove\", \"mousemove\");\n\n  return {\n    drawWithEraser: function drawWithEraser() {\n      ctx.globalCompositeOperation = \"destination-out\";\n    },\n    drawWithColor: function drawWithColor(color) {\n      ctx.globalCompositeOperation = \"source-over\";\n      ctx.strokeStyle = color;\n    },\n    setPencilSize: function setPencilSize(pxSize) {\n      ctx.lineWidth = pxSize / scale;\n    }\n  };\n};\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (link, _ref) {\n  var OrginalImage = _ref.OrginalImage,\n      canvas = _ref.canvas,\n      originalFileName = _ref.originalFileName;\n\n  // Download button\n  var downloadCounter = 0;\n  link.addEventListener(\"click\", downloadImage, false);\n  function downloadImage(e) {\n    var filename = originalFileName + \"-minimage-\" + downloadCounter + \".png\";\n    this.href = mergeCanvasAndImage(canvas, OrginalImage).toDataURL(\"image/png\", 0.5);\n    this.download = filename;\n    downloadCounter++;\n  }\n};\n\nfunction mergeCanvasAndImage(canvas, img) {\n  var clone = document.createElement(\"canvas\");\n  clone.width = canvas.width;\n  clone.height = canvas.height;\n  var ctx = clone.getContext(\"2d\");\n  // Draw the orignal image\n  ctx.drawImage(img, 0, 0, clone.width, clone.height);\n  // And then the user's mess on top\n  ctx.drawImage(canvas, 0, 0);\n  return clone;\n}\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (slider, _ref) {\n  var onChange = _ref.onChange;\n\n  // Sets draw size at load and style when the user interracts with the slider\n  function onPencilSizeChange(pxSize) {\n    slider.value = pxSize;\n    localStorage.setItem(\"pensize\", pxSize);\n    onChange(pxSize);\n  }\n  slider.addEventListener(\"input\", function (e) {\n    return onPencilSizeChange(e.target.value);\n  });\n  onPencilSizeChange(parseInt(localStorage.getItem(\"pensize\")) || DEFAULTSIZE);\n};\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (canvas) {\n  var ctx = void 0,\n      w = void 0,\n      h = void 0;\n  var bgColor = randomColor();\n  function reset() {\n    w = canvas.width = window.innerWidth;\n    h = canvas.height = window.innerHeight;\n    ctx = canvas.getContext(\"2d\");\n    ctx.fillStyle = bgColor;\n    ctx.fillRect(0, 0, w, h);\n    ctx.lineCap = \"round\";\n  }\n  reset();\n  window.addEventListener(\"resize\", reset);\n\n  var position = void 0,\n      speed = void 0,\n      acceleration = void 0,\n      timeoutHandle = void 0,\n      accelerationTimeoutHandle = void 0;\n  function randomizeInst() {\n    position = {\n      // x: Math.random() * w,\n      // y: Math.random() * h\n      x: w / 2,\n      y: h / 2\n    };\n    speed = {\n      x: Math.random() * 10 - 5,\n      y: Math.random() * 10 - 5\n    };\n    acceleration = {\n      x: Math.random() * 10 - 5,\n      y: Math.random() * 10 - 5\n    };\n\n    ctx.strokeStyle = randomColor(bgColor);\n    ctx.lineWidth = 20 + Math.random() * 40;\n    ctx.beginPath();\n    ctx.moveTo(position.x, position.y);\n  }\n  randomizeInst();\n\n  function randomAcceletation() {\n    acceleration = {\n      x: Math.random() * 2 - 1,\n      y: Math.random() * 2 - 1\n    };\n    // speed.x*=0.2;\n    // speed.y*=0.2;\n\n    accelerationTimeoutHandle = setTimeout(randomAcceletation, 100 + Math.random() * 200);\n  }\n  randomAcceletation();\n  function renderCanvas() {\n    ctx.moveTo(position.x, position.y);\n    speed.x *= 0.95;\n    speed.y *= 0.95;\n\n    speed.x += acceleration.x;\n    speed.y += acceleration.y;\n    position.x += speed.x;\n    position.y += speed.y;\n    ctx.lineTo(position.x, position.y);\n    ctx.stroke();\n    if (position.x < -50 || position.x > w + 50 || position.y < -50 || position.y > h + 50) randomizeInst();\n  }\n\n  var isDrawing = true;\n  function drawLoop() {\n    if (isDrawing) {\n      window.requestAnimationFrame(drawLoop);\n      renderCanvas();\n    }\n  }\n\n  drawLoop();\n\n  function stopAnim() {\n    isDrawing = false;\n    clearTimeout(accelerationTimeoutHandle);\n    window.removeEventListener(\"resize\", reset);\n  }\n\n  return {\n    stopAnim: stopAnim\n  };\n};\n\nfunction randomColor() {\n  var exception = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n\n  var pal = \"#F44336,#E91E63,#9C27B0,#673AB7,#3F51B5,#2196F3,#03A9F4,#00BCD4,#009688,#4CAF50,#8BC34A,#CDDC39,#FFEB3B,#FFC107,#FF9800,#FF5722\".split(\",\").filter(function (c) {\n    return c != exception;\n  });\n  return pal[Math.floor(Math.random() * (pal.length + 0.99))];\n}\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// bundle.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d88c8bd1b8e8d15279e0","/*\n\nSee the app in action here : https://minimage.tk\n\n*/\nimport \"./styles.less\";\nimport setupColorPicker from \"./colorPicker.js\";\nimport askForIMG from \"./getAnImage.js\";\nimport toggleAbleBackground from \"./toggleAbleBackground.js\";\nimport setupEditableCanvas from \"./editableCanvas.js\";\nimport canvasMergerAndDonwloaderLink from \"./canvasMergerAndDonwloaderLink.js\";\nimport pencilSizeSlider from \"./pencilSizeSlider.js\";\nimport welcomeAnim from \"./welcomeAnim.js\";\nconst byId = document.getElementById.bind(document),\n  DEFAULTSIZE = 20;\n\nlet originalFileName, OrginalImage;\naskForIMG({\n  fileinput: byId(\"fileinput\"),\n  onImageCreated: (img, filename) => {\n    originalFileName = filename;\n    letUserDrawAndDownload(img);\n  }\n});\n\nlet { stopAnim } = welcomeAnim(byId(\"welcome\"));\n\n// Lets the user draw on the loaded image\nfunction letUserDrawAndDownload(img) {\n  OrginalImage = img;\n  stopAnim();\n  const canvas = byId(\"drawzone\"),\n    drawzoneWrapper = byId(\"drawzoneWrapper\");\n  drawzoneWrapper.appendChild(img);\n\n  // Switch to drawing mode\n  byId(\"inputForAFile\").style.display = \"none\";\n  byId(\"drawAndDownload\").style.display = \"\";\n\n  // Fits the canvas to screen\n  let maxRes = Math.max(window.innerHeight, window.innerWidth);\n  let imgScale = Math.max(img.width / maxRes, img.height / maxRes, 1);\n  img.width = canvas.width = img.width / imgScale;\n  img.height = canvas.height = img.height / imgScale;\n  drawzoneWrapper.style.maxWidth = img.width;\n  drawzoneWrapper.style.maxHeight = img.height;\n\n  let ctx = canvas.getContext(\"2d\");\n  let hasDoneFirstDraw = false;\n  let {\n    drawWithColor,\n    drawWithEraser,\n    setPencilSize\n  } = setupEditableCanvas(canvas, {\n    onMouseUp: () => {\n      if (!hasDoneFirstDraw) {\n        hasDoneFirstDraw = true;\n        download.classList.add(\"usable\");\n      }\n    }\n  });\n\n  // Sets draw color at load and when user clicks color input\n  function setColor(color) {\n    if (color == \"eraser\") {\n      drawWithEraser();\n    } else {\n      drawWithColor(color);\n    }\n  }\n\n  let background = byId(\"background\");\n\n  const { setColorDotSize, refreshColorPreviewBorder } = setupColorPicker(\n    byId(\"pensizePreview\"),\n    {\n      canvasForCursor: canvas,\n      onColorChange: setColor,\n      elementToContrastWith: background\n    }\n  );\n  // Tap the background to switch its color (usefull for transparent images)\n  toggleAbleBackground(background, { onChange: refreshColorPreviewBorder });\n\n  pencilSizeSlider(byId(\"pensize\"), {\n    onChange(pxSize) {\n      setColorDotSize(pxSize);\n      setPencilSize(pxSize);\n    }\n  });\n\n  canvasMergerAndDonwloaderLink(byId(\"download\"), {\n    OrginalImage,\n    originalFileName,\n    canvas\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app.js","const DEFAULTCOLOR = \"#2b76ce\";\nimport colorToRGB from \"./colorToRGB.js\";\nimport { paletteColors } from \"./palette.js\";\nexport default function(\n  pensizePreview,\n  { onColorChange, elementToContrastWith, canvasForCursor }\n) {\n  const pensizePreviewDot = pensizePreview.children[0];\n\n  function refreshColorPreviewBorder() {\n    pensizePreviewDot.style.border =\n      \"1px solid \" +\n      borderColor(currentColor, elementToContrastWith.style.backgroundColor);\n  }\n\n  let currentColor;\n  pensizePreview.addEventListener(\"click\", () =>\n    openColorPicker(currentColor, onColorPicked)\n  );\n  function onColorPicked(color) {\n    currentColor = color;\n    setCursor(canvasForCursor, currentSize, currentColor);\n    if (color == \"eraser\") {\n      pensizePreviewDot.style.background = \"\";\n      pensizePreviewDot.classList.add(\"eraser\");\n    } else {\n      pensizePreviewDot.classList.remove(\"eraser\");\n      pensizePreviewDot.style.background = color;\n      localStorage.setItem(\"color\", color);\n      refreshColorPreviewBorder();\n    }\n    onColorChange(color);\n  }\n  let currentSize;\n  function setColorDotSize(pxSize) {\n    currentSize = pxSize;\n    setCursor(canvasForCursor, currentSize, currentColor);\n    pensizePreviewDot.style.transform = \"scale(\" + pxSize / 10 + \")\";\n  }\n\n  setTimeout(() =>\n    onColorPicked(localStorage.getItem(\"color\") || DEFAULTCOLOR)\n  );\n\n  return {\n    setColorDotSize,\n    refreshColorPreviewBorder\n  };\n}\n\nfunction luminance(color) {\n  return colorToRGB(color).reduce((a, b) => a + b, 0) / 3;\n  pickColor;\n}\n\nfunction borderColor(foreground, background) {\n  if (foreground == \"eraser\") return \"transparent\";\n  let bgL = luminance(background);\n  let fgL = luminance(foreground);\n  if (bgL > 125 && fgL > 200) return \"black\";\n  if (bgL < 125 && fgL < 25) return \"white\";\n  return \"transparent\";\n}\n\nfunction textColor(background) {\n  return luminance(background) > 255 / 2\n    ? \"rgba(0,0,0,0.8)\"\n    : \"rgba(255,255,255,0.8)\";\n}\n\nfunction openColorPicker(currentColor, callback) {\n  let modal = document.createElement(\"div\");\n  modal.classList.add(\"modal\");\n  document.body.appendChild(modal);\n\n  function pickColor(color) {\n    closeModal();\n    callback(color);\n  }\n\n  paletteColors.forEach(color => {\n    let button = document.createElement(\"button\");\n    button.classList.add(\"colorbutton\");\n    if (color === currentColor) {\n      button.classList.add(\"active\");\n      button.innerHTML = \"Selected\";\n      button.style.color = textColor(color);\n    }\n    button.style.backgroundColor = color.toLowerCase();\n    button.addEventListener(\"click\", () => pickColor(color));\n    modal.appendChild(button);\n  });\n\n  let eraser = document.createElement(\"button\");\n  eraser.classList.add(\"eraser\");\n  eraser.addEventListener(\"click\", () => pickColor(\"eraser\"));\n  eraser.innerHTML =\n    '<img src=\"/images/eraser-color.svg\"/><span class=\"imagelabel\">' +\n    (\"eraser\" === currentColor ? \"Eraser selected\" : \"Eraser\") +\n    \"</span>\";\n  modal.appendChild(eraser);\n\n  function closeModal() {\n    modal.classList.add(\"closing\");\n    setTimeout(() => document.body.removeChild(modal), 300);\n  }\n}\n\nfunction setCursor(node, size, color) {\n  let s = size < 4 ? 4 : size;\n  let c = document.createElement(\"canvas\");\n  c.width = c.height = s;\n  let ctx = c.getContext(\"2d\");\n  if (color == \"eraser\") drawEraser(ctx, s);\n  else drawColorCircle(ctx, s, color);\n  let cursor = c.toDataURL(\"image/png\");\n  node.style.cursor = `url(${cursor}) ${s / 2} ${s / 2},auto`;\n}\n\nfunction drawColorCircle(ctx, s, color) {\n  ctx.beginPath();\n  ctx.arc(s / 2, s / 2, s / 2, 0, 2 * Math.PI, false);\n  ctx.fillStyle = color;\n  ctx.fill();\n}\n\nfunction drawEraser(ctx, s) {\n  ctx.fillStyle = \"#da502d\";\n  ctx.fillRect(0, 0, s * 2 / 3, s);\n  ctx.fillStyle = \"#6584a5\";\n  ctx.fillRect(s * 2 / 3, 0, s, s);\n  ctx.globalCompositeOperation = \"destination-in\";\n  drawColorCircle(ctx, s, \"white\");\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/colorPicker.js","export default function colorToRGB(color) {\n  var canvas = document.createElement(\"canvas\");\n  canvas.width = canvas.height = 1;\n  var ctx = canvas.getContext(\"2d\");\n  ctx.clearRect(0, 0, 1, 1);\n  ctx.fillStyle = color;\n  ctx.fillRect(0, 0, 1, 1);\n  return [...ctx.getImageData(0, 0, 1, 1).data].slice(0, 3);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/colorToRGB.js","export const paletteColors = \"#000000,#FFFFFF,#F44336,#E91E63,#9C27B0,#673AB7,#3F51B5,#2196F3,#03A9F4,#00BCD4,#009688,#4CAF50,#8BC34A,#CDDC39,#FFEB3B,#FFC107,#FF9800,#FF5722,#795548,#9E9E9E,#607D8B\".split(\n  \",\"\n);\n\n\n\n// WEBPACK FOOTER //\n// ./src/palette.js","import { startTask, endTask } from \"./spinners.js\";\nexport default function({ onImageCreated, fileinput }) {\n  // Callbacks onImageCreated with img tag and filename\n  let originalFileName = \"pasted-image\";\n  let askingForImage = true;\n\n  // Transforms the file input content to a real image\n  function loadFile(fileToLoad) {\n    startTask();\n    let fileReader = new FileReader();\n    fileReader.onload = () => {\n      createImageWithFileContent(fileReader.result);\n      endTask();\n    };\n    fileReader.onerror = endTask;\n    fileReader.readAsDataURL(fileToLoad);\n  }\n\n  function createImageWithFileContent(result) {\n    startTask();\n    console.log(\"trying to load file as image\");\n    if (!askingForImage) return;\n    let img = new Image();\n    img.onload = () => {\n      askingForImage = false;\n      onImageCreated(img, originalFileName);\n      endTask();\n    };\n    img.onerror = endTask;\n    img.src = result;\n  }\n\n  // Setup of the welcome  UI\n  function askForImage() {\n    fileinput.addEventListener(\"change\", fileChanged);\n    function fileChanged(changeEvent) {\n      fileinput.removeEventListener(\"change\", fileChanged);\n      originalFileName =\n        fileinput.value.split(\"\\\\\").pop().split(\".\")[0] || \"image\";\n      loadFile(changeEvent.target.files[0]);\n    }\n  }\n\n  askForImage();\n\n  window.addEventListener(\"paste\", function(ev) {\n    handleDataTransferItems(ev.clipboardData.items);\n  });\n\n  document.body.addEventListener(\"dragover\", function(ev) {\n    ev.preventDefault();\n    ev.stopPropagation();\n  });\n  document.body.addEventListener(\"drop\", function(ev) {\n    ev.preventDefault();\n    ev.stopPropagation();\n    handleDataTransferItems(ev.dataTransfer.items);\n  });\n\n  function handleDataTransferItems(items) {\n    // Tries to paste an image\n    let imageFile = Array.prototype.find.call(\n      items,\n      e => e.kind == \"file\" && e.type.match(\"image\")\n    );\n    originalFileName = \"pasted-image\";\n    if (imageFile) {\n      console.log(\"parsing pasted image content\");\n      loadFile(imageFile.getAsFile());\n      return;\n    }\n    // Tries to load a remote image given its adress\n    let url = Array.prototype.find.call(items, e => e.kind == \"string\");\n    if (url) {\n      console.log(\"parsing url content\");\n      url.getAsString(s => createImageWithFileContent(s));\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/getAnImage.js","let tasksInProgress = 0;\nexport function startTask() {\n  tasksInProgress++;\n  updateLook();\n}\n\nexport function endTask() {\n  tasksInProgress--;\n  setTimeout(updateLook);\n}\n\nexport function updateLook() {\n  spinners.classList[tasksInProgress ? \"remove\" : \"add\"](\"hidden\");\n}\ndocument.addEventListener(\"DOMContentLoaded\", updateLook);\n\n\n\n// WEBPACK FOOTER //\n// ./src/spinners.js","export default function(background, { onChange }) {\n  function switchBackground() {\n    currentMode++;\n    localStorage.setItem(\"background\", currentMode);\n    applyBackground();\n  }\n  function applyBackground() {\n    let options = [\"#FFF\", \"#333\"];\n    let current = currentMode % options.length;\n    background.style.backgroundColor = options[current];\n    onChange(current);\n\n    let bclass = document.body.classList;\n    options.forEach((color, index) => bclass.remove(\"background_n_\" + index));\n    bclass.add(\"background_n_\" + current);\n    // https://www.youtube.com/watch?v=Pr8ETbGz35Q\n    console.log(current == 0 ? \"jour !\" : \"nuit !\");\n  }\n  let currentMode = localStorage.getItem(\"background\") || 0;\n  applyBackground();\n  background.addEventListener(\"click\", switchBackground);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/toggleAbleBackground.js","export default function(canvas, { onMouseUp }) {\n  // We cache some zoom related data to avoid getting them all the time\n  let scale, rect;\n  function measureScale() {\n    rect = canvas.getBoundingClientRect();\n    scale = rect.width / canvas.width;\n  }\n  measureScale();\n  window.addEventListener(\"resize\", measureScale);\n\n  let ctx = canvas.getContext(\"2d\");\n\n  // To make the lines look slightly nicer\n  ctx.lineCap = \"round\";\n\n  // We cache the mouse position and previous mouse position.\n  // Theay are defined by touch events, and used by the draw loop\n  let mousePos = {\n      x: 0,\n      y: 0\n    },\n    lastPos = mousePos;\n\n  canvas.addEventListener(\n    \"mousedown\",\n    function(e) {\n      mousePos = lastPos = getMousePos(e);\n      startDrawLoop();\n    },\n    false\n  );\n\n  document.addEventListener(\"mouseup\", endDrawLoop, false);\n\n  canvas.addEventListener(\n    \"mousemove\",\n    function(e) {\n      mousePos = getMousePos(e);\n    },\n    false\n  );\n\n  // Get the position of the mouse relative to the canvas\n  function getMousePos(mouseEvent) {\n    return {\n      x: (mouseEvent.clientX - rect.left) / scale,\n      y: (mouseEvent.clientY - rect.top) / scale\n    };\n  }\n\n  // Drawing loop is separated from the events￼\n\n  let isDrawing = false;\n\n  function startDrawLoop() {\n    if (isDrawing) return;\n    isDrawing = true;\n    ctx.beginPath();\n    drawLoop();\n  }\n  function endDrawLoop() {\n    isDrawing && onMouseUp();\n    isDrawing = false;\n  }\n\n  function drawLoop() {\n    if (isDrawing) {\n      window.requestAnimationFrame(drawLoop);\n      renderCanvas();\n    }\n  }\n  function renderCanvas() {\n    ctx.moveTo(lastPos.x, lastPos.y);\n    ctx.lineTo(mousePos.x, mousePos.y);\n    ctx.stroke();\n    lastPos = mousePos;\n  }\n\n  // Proxy mobile events to their mouse counterpart\n  function proxyTouchToMouse(\n    touchEventName,\n    mouseEventName,\n    eventTarget = canvas\n  ) {\n    canvas.addEventListener(\n      touchEventName,\n      function(e) {\n        e.preventDefault();\n        let { clientX, clientY } = e.touches[0] || {};\n        let mouseEvent = new MouseEvent(mouseEventName, {\n          clientX,\n          clientY\n        });\n        eventTarget.dispatchEvent(mouseEvent);\n      },\n      false\n    );\n  }\n  proxyTouchToMouse(\"touchstart\", \"mousedown\");\n  proxyTouchToMouse(\"touchend\", \"mouseup\", document);\n  proxyTouchToMouse(\"touchmove\", \"mousemove\");\n\n  return {\n    drawWithEraser() {\n      ctx.globalCompositeOperation = \"destination-out\";\n    },\n    drawWithColor(color) {\n      ctx.globalCompositeOperation = \"source-over\";\n      ctx.strokeStyle = color;\n    },\n    setPencilSize(pxSize) {\n      ctx.lineWidth = pxSize / scale;\n    }\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/editableCanvas.js","export default function(link, { OrginalImage, canvas, originalFileName }) {\n  // Download button\n  var downloadCounter = 0;\n  link.addEventListener(\"click\", downloadImage, false);\n  function downloadImage(e) {\n    let filename = originalFileName + \"-minimage-\" + downloadCounter + \".png\";\n    this.href = mergeCanvasAndImage(canvas, OrginalImage).toDataURL(\n      \"image/png\",\n      0.5\n    );\n    this.download = filename;\n    downloadCounter++;\n  }\n}\n\nfunction mergeCanvasAndImage(canvas, img) {\n  let clone = document.createElement(\"canvas\");\n  clone.width = canvas.width;\n  clone.height = canvas.height;\n  var ctx = clone.getContext(\"2d\");\n  // Draw the orignal image\n  ctx.drawImage(img, 0, 0, clone.width, clone.height);\n  // And then the user's mess on top\n  ctx.drawImage(canvas, 0, 0);\n  return clone;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/canvasMergerAndDonwloaderLink.js","export default function(slider, { onChange }) {\n  // Sets draw size at load and style when the user interracts with the slider\n  function onPencilSizeChange(pxSize) {\n    slider.value = pxSize;\n    localStorage.setItem(\"pensize\", pxSize);\n    onChange(pxSize);\n  }\n  slider.addEventListener(\"input\", e => onPencilSizeChange(e.target.value));\n  onPencilSizeChange(parseInt(localStorage.getItem(\"pensize\")) || DEFAULTSIZE);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pencilSizeSlider.js","function randomColor(exception = \"\") {\n  let pal = \"#F44336,#E91E63,#9C27B0,#673AB7,#3F51B5,#2196F3,#03A9F4,#00BCD4,#009688,#4CAF50,#8BC34A,#CDDC39,#FFEB3B,#FFC107,#FF9800,#FF5722\"\n    .split(\",\")\n    .filter(c => c != exception);\n  return pal[Math.floor(Math.random() * (pal.length + 0.99))];\n}\n\nexport default function(canvas) {\n  let ctx, w, h;\n  let bgColor = randomColor();\n  function reset() {\n    w = canvas.width = window.innerWidth;\n    h = canvas.height = window.innerHeight;\n    ctx = canvas.getContext(\"2d\");\n    ctx.fillStyle = bgColor;\n    ctx.fillRect(0, 0, w, h);\n    ctx.lineCap = \"round\";\n  }\n  reset();\n  window.addEventListener(\"resize\", reset);\n\n  let position, speed, acceleration, timeoutHandle, accelerationTimeoutHandle;\n  function randomizeInst() {\n    position = {\n      // x: Math.random() * w,\n      // y: Math.random() * h\n      x: w / 2,\n      y: h / 2\n    };\n    speed = {\n      x: Math.random() * 10 - 5,\n      y: Math.random() * 10 - 5\n    };\n    acceleration = {\n      x: Math.random() * 10 - 5,\n      y: Math.random() * 10 - 5\n    };\n\n    ctx.strokeStyle = randomColor(bgColor);\n    ctx.lineWidth = 20 + Math.random() * 40;\n    ctx.beginPath();\n    ctx.moveTo(position.x, position.y);\n  }\n  randomizeInst();\n\n  function randomAcceletation() {\n    acceleration = {\n      x: Math.random() * 2 - 1,\n      y: Math.random() * 2 - 1\n    };\n    // speed.x*=0.2;\n    // speed.y*=0.2;\n\n    accelerationTimeoutHandle = setTimeout(\n      randomAcceletation,\n      100 + Math.random() * 200\n    );\n  }\n  randomAcceletation();\n  function renderCanvas() {\n    ctx.moveTo(position.x, position.y);\n    speed.x *= 0.95;\n    speed.y *= 0.95;\n\n    speed.x += acceleration.x;\n    speed.y += acceleration.y;\n    position.x += speed.x;\n    position.y += speed.y;\n    ctx.lineTo(position.x, position.y);\n    ctx.stroke();\n    if (\n      position.x < -50 ||\n      position.x > w + 50 ||\n      position.y < -50 ||\n      position.y > h + 50\n    )\n      randomizeInst();\n  }\n\n  let isDrawing = true;\n  function drawLoop() {\n    if (isDrawing) {\n      window.requestAnimationFrame(drawLoop);\n      renderCanvas();\n    }\n  }\n\n  drawLoop();\n\n  function stopAnim() {\n    isDrawing = false;\n    clearTimeout(accelerationTimeoutHandle);\n    window.removeEventListener(\"resize\", reset);\n  }\n\n  return {\n    stopAnim\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/welcomeAnim.js"],"sourceRoot":""}