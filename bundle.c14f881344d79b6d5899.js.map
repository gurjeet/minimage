{"version":3,"sources":["webpack:///bundle.c14f881344d79b6d5899.js","webpack:///webpack/bootstrap c14f881344d79b6d5899","webpack:///./src/canvasMergerAndDonwloaderLink.js","webpack:///./src/modal.js","webpack:///./src/app.js","webpack:///./src/colorPicker.js","webpack:///./src/colorToRGB.js","webpack:///./src/palette.js","webpack:///./src/getAnImage.js","webpack:///./src/toggleAbleBackground.js","webpack:///./src/editableCanvas.js","webpack:///./src/showDownloadOptions.js","webpack:///./src/pencilSizeSlider.js","webpack:///./src/welcomeAnim.js","webpack:///./src/checkRunWithinWebview.js","webpack:///./src/spinners.js","webpack:///./src/detectCtrlS.js","webpack:///./node_modules/offline-plugin/runtime.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","makeDownloadLink","link","_ref","downloadImage","e","preventDefault","_showDownloadOptions","_showDownloadOptions2","showDownloadOptions","failed","suceeded","triggerDownload","canvas","originalFileName","OrginalImage","addEventListener","nope","console","log","arguments","length","undefined","filename","downloadCounter","mergeCanvasAndImage","downloadCanvas","img","ctx","getContext","oldComposite","globalCompositeOperation","drawImage","width","height","setTimeout","toBlob","blob","window","navigator","msSaveOrOpenBlob","msSaveBlob","url","URL","createObjectURL","document","createElement","body","appendChild","setAttribute","click","revokeObjectURL","removeChild","value","createModal","className","callback","closeOnEscape","ev","which","closeModal","modal","classList","add","backdrop","removeEventListener","style","zIndex","modalZindex","_interopRequireDefault","obj","default","letUserDrawAndDownload","setColor","color","drawWithEraser","drawWithColor","stopAnim","byId","drawzoneWrapper","display","maxRes","Math","max","innerWidth","innerHeight","imgScale","maxWidth","maxHeight","hasDoneFirstDraw","barClass","background","_setupColorPicker","_colorPicker2","canvasForCursor","onColorChange","elementToContrastWith","setColorDotSize","refreshColorPreviewBorder","_setupEditableCanvas","clearColorPicker","_editableCanvas2","onMouseDown","getClientRects","onMouseUp","download","remove","setPencilSize","_toggleAbleBackground2","onChange","_pencilSizeSlider2","pxSize","_canvasMergerAndDonwloaderLink","_detectCtrlS","detectCtrlS","_colorPicker","_getAnImage","_getAnImage2","_toggleAbleBackground","_editableCanvas","_pencilSizeSlider","_welcomeAnim2","_welcomeAnim3","_checkRunWithinWebview","_spinners","_runtime","OfflinePluginRuntime","newObj","key","getElementById","bind","install","checkRunWithinWebview","fileinput","onImageCreated","startTask","endTask","_welcomeAnim","fitWindow","bgColor","borderColor","foreground","bgL","_colorToRGB","luminance","fgL","textColor","openColorPicker","currentColor","_modal","_ref2","pickColor","_palette","paletteColors","forEach","button","innerHTML","backgroundColor","toLowerCase","eraser","setCursor","node","size","drawEraser","drawColorCircle","cursor","toDataURL","beginPath","arc","PI","fillStyle","fill","fillRect","pensizePreview","pensizePreviewBorder","openInitializedColorPicker","onColorPicked","previousColor","localStorage","setItem","currentSize","pensizePreviewDot","transform","baseSize","children","getItem","getBoundingClientRect","String","fromCharCode","DEFAULTCOLOR","_toConsumableArray","arr","Array","isArray","arr2","from","colorToRGB","clearRect","concat","getImageData","data","slice","reduce","a","b","split","loadFile","fileToLoad","fileReader","FileReader","onload","createImageWithFileContent","result","onerror","readAsDataURL","askingForImage","Image","src","handleDataTransferItems","items","imageFile","find","kind","type","match","getAsFile","getAsString","_ref$startTask","_ref$endTask","fileChanged","changeEvent","pop","target","files","clipboardData","stopPropagation","dataTransfer","switchBackground","currentMode","applyBackground","options","current","bclass","index","switchCount","measureScale","rect","scale","lastUsedPXsize","lineWidth","getMousePos","mouseEvent","x","clientX","left","y","clientY","top","startDrawLoop","isDrawing","drawLoop","endDrawLoop","requestAnimationFrame","renderCanvas","moveTo","lastPos","lineTo","mousePos","stroke","proxyTouchToMouse","touchEventName","mouseEventName","eventTarget","touches","MouseEvent","dispatchEvent","lineCap","setData","strokeStyle","_objectDestructuringEmpty","TypeError","reportDLStatus","text","addToHomeScreen","targetClass","getAttribute","location","reload","exeption","stack","userAgent","search","slider","onPencilSizeChange","parseInt","DEFAULTSIZE","randomColor","colorPool","exception","withoutEx","filter","floor","random","reset","w","h","randomizeInst","position","speed","acceleration","coolColors","randomAcceletation","accelerationTimeoutHandle","clearTimeout","JSONPcall","JSONPcallback","isWebView","tasksInProgress","updateLook","spinners","event","ctrlKey","metaKey","hasSW","fetch","documentElement","protocol","hostname","indexOf","serviceWorker","register","applicationCache","doLoad","iframe","directory","appCacheIframe","readyState","applyUpdate","errback","update","getRegistration","then","registration","contentWindow"],"mappings":"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","file":"bundle.c14f881344d79b6d5899.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 2);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.makeDownloadLink = makeDownloadLink;\nexports.triggerDownload = triggerDownload;\nexports.mergeCanvasAndImage = mergeCanvasAndImage;\n\nvar _showDownloadOptions2 = __webpack_require__(11);\n\nfunction makeDownloadLink(link, _ref) {\n  var OrginalImage = _ref.OrginalImage,\n      canvas = _ref.canvas,\n      originalFileName = _ref.originalFileName;\n\n  // Download button\n  function downloadImage(e) {\n    e.preventDefault();\n\n    var _showDownloadOptions = (0, _showDownloadOptions2.showDownloadOptions)({}),\n        failed = _showDownloadOptions.failed,\n        suceeded = _showDownloadOptions.suceeded;\n\n    triggerDownload(canvas, originalFileName, OrginalImage, failed, suceeded);\n  }\n  link.addEventListener(\"click\", downloadImage);\n}\n\nfunction nope(e) {\n  console.log(e);\n}\nvar downloadCounter = 0;\nfunction triggerDownload(canvas, originalFileName, OrginalImage) {\n  var failed = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : nope;\n  var suceeded = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : nope;\n\n  var filename = originalFileName + \"-minimage-\" + downloadCounter + \".png\";\n  mergeCanvasAndImage(canvas, OrginalImage, failed, suceeded);\n  downloadCanvas(canvas, filename, failed, suceeded);\n\n  downloadCounter++;\n}\n\nfunction mergeCanvasAndImage(canvas, img, failed, suceeded) {\n  try {\n    // Pastes the image as a canvas background\n    var ctx = canvas.getContext(\"2d\");\n    var oldComposite = ctx.globalCompositeOperation;\n    ctx.globalCompositeOperation = \"destination-over\";\n\n    // Draw the orignal image\n    ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n\n    ctx.globalCompositeOperation = oldComposite;\n    suceeded && setTimeout(suceeded);\n    return canvas;\n  } catch (e) {\n    failed && failed(e);\n  }\n}\n\nfunction downloadCanvas(canvas, filename, failed, suceeded) {\n  try {\n    canvas.toBlob(function (blob) {\n      try {\n        if (window.navigator.msSaveOrOpenBlob) {\n          window.navigator.msSaveBlob(blob, filename);\n          suceeded && setTimeout(suceeded);\n        } else {\n          var url = window.URL.createObjectURL(blob);\n          var link = document.createElement(\"a\");\n          document.body.appendChild(link);\n          link.setAttribute(\"href\", url);\n          link.setAttribute(\"download\", filename);\n          link.click();\n          suceeded && setTimeout(suceeded);\n          setTimeout(function () {\n            window.URL.revokeObjectURL(url);\n            document.body.removeChild(link);\n          }, 3000);\n        }\n      } catch (e) {\n        failed && failed(e);\n      }\n    });\n  } catch (e) {\n    failed && failed(e);\n  }\n}\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createModal = createModal;\nvar modalZindex = 4;\nfunction createModal(className, callback) {\n  var modal = document.createElement(\"div\");\n  modal.classList.add(\"modal\");\n  modal.classList.add(className);\n  document.body.appendChild(modal);\n\n  var backdrop = document.createElement(\"div\");\n  backdrop.classList.add(\"modal-backdrop\");\n  document.body.appendChild(backdrop);\n\n  backdrop.style.zIndex = modalZindex;\n  modal.style.zIndex = modalZindex + 1;\n  backdrop.addEventListener(\"click\", closeModal);\n  document.addEventListener(\"keyup\", closeOnEscape);\n  function closeOnEscape(ev) {\n    if (ev.which == 27 // escape key\n    ) closeModal();\n  }\n  function closeModal() {\n    modal.classList.add(\"closing\");\n    backdrop.classList.add(\"closing\");\n    setTimeout(function () {\n      document.body.removeChild(modal);\n      document.body.removeChild(backdrop);\n    }, 300);\n    document.removeEventListener(\"keyup\", closeOnEscape);\n  }\n  modalZindex += 2;\n  return callback({ modal: modal, closeModal: closeModal });\n}\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(3);\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n__webpack_require__(4);\n\nvar _colorPicker = __webpack_require__(5);\n\nvar _colorPicker2 = _interopRequireDefault(_colorPicker);\n\nvar _getAnImage = __webpack_require__(8);\n\nvar _getAnImage2 = _interopRequireDefault(_getAnImage);\n\nvar _toggleAbleBackground = __webpack_require__(9);\n\nvar _toggleAbleBackground2 = _interopRequireDefault(_toggleAbleBackground);\n\nvar _editableCanvas = __webpack_require__(10);\n\nvar _editableCanvas2 = _interopRequireDefault(_editableCanvas);\n\nvar _canvasMergerAndDonwloaderLink = __webpack_require__(0);\n\nvar _pencilSizeSlider = __webpack_require__(12);\n\nvar _pencilSizeSlider2 = _interopRequireDefault(_pencilSizeSlider);\n\nvar _welcomeAnim2 = __webpack_require__(13);\n\nvar _welcomeAnim3 = _interopRequireDefault(_welcomeAnim2);\n\nvar _checkRunWithinWebview = __webpack_require__(14);\n\nvar _spinners = __webpack_require__(15);\n\nvar _detectCtrlS = __webpack_require__(16);\n\nvar _runtime = __webpack_require__(17);\n\nvar OfflinePluginRuntime = _interopRequireWildcard(_runtime);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*\n\nSee the app in action here : https://minimage.tk\n\n*/\nvar byId = document.getElementById.bind(document);\n\nOfflinePluginRuntime.install();\n\n(0, _checkRunWithinWebview.checkRunWithinWebview)();\nvar originalFileName = void 0,\n    OrginalImage = void 0;\n(0, _getAnImage2.default)({\n  fileinput: byId(\"fileinput\"),\n  onImageCreated: function onImageCreated(img, filename) {\n    originalFileName = filename;\n    letUserDrawAndDownload(img);\n  },\n  startTask: _spinners.startTask,\n  endTask: _spinners.endTask\n});\n\nvar _welcomeAnim = (0, _welcomeAnim3.default)(byId(\"welcome\"), { fitWindow: true }),\n    stopAnim = _welcomeAnim.stopAnim,\n    bgColor = _welcomeAnim.bgColor;\n\nbyId(\"fileInputWrapper\").style.color = bgColor;\n\n// Lets the user draw on the loaded image\nfunction letUserDrawAndDownload(img) {\n  OrginalImage = img;\n  stopAnim();\n  var canvas = byId(\"drawzone\"),\n      drawzoneWrapper = byId(\"drawzoneWrapper\");\n\n  // Switch to drawing mode\n  byId(\"inputForAFile\").style.display = \"none\";\n  byId(\"drawAndDownload\").style.display = \"\";\n\n  console.log(img.width, img.height);\n  var maxRes = Math.max(window.innerWidth, window.innerHeight) * 2;\n  // Fits the canvas to screen\n  var imgScale = Math.max(img.width / maxRes, img.height / maxRes, 1);\n  img.width = canvas.width = img.width / imgScale;\n  img.height = canvas.height = img.height / imgScale;\n  drawzoneWrapper.style.maxWidth = img.width;\n  drawzoneWrapper.style.maxHeight = img.height;\n\n  // Needs to happen AFTER size measurements\n  drawzoneWrapper.appendChild(img);\n\n  var ctx = canvas.getContext(\"2d\");\n  var hasDoneFirstDraw = false;\n  var barClass = byId(\"topbar\").classList;\n\n  var background = byId(\"background\");\n\n  var _setupColorPicker = (0, _colorPicker2.default)(byId(\"pensizePreview\"), {\n    canvasForCursor: canvas,\n    onColorChange: setColor,\n    elementToContrastWith: background\n  }),\n      setColorDotSize = _setupColorPicker.setColorDotSize,\n      refreshColorPreviewBorder = _setupColorPicker.refreshColorPreviewBorder,\n      clearColorPicker = _setupColorPicker.clearColorPicker;\n\n  var _setupEditableCanvas = (0, _editableCanvas2.default)(canvas, {\n    onMouseDown: function onMouseDown() {\n      if (canvas.getClientRects()[0].height + 2 * 80 > window.innerHeight) {\n        barClass.add(\"drawInProgress\");\n      }\n    },\n    onMouseUp: function onMouseUp() {\n      if (!hasDoneFirstDraw) {\n        hasDoneFirstDraw = true;\n        download.classList.add(\"usable\");\n      }\n      barClass.remove(\"drawInProgress\");\n    },\n\n    OrginalImage: OrginalImage\n  }),\n      drawWithColor = _setupEditableCanvas.drawWithColor,\n      drawWithEraser = _setupEditableCanvas.drawWithEraser,\n      setPencilSize = _setupEditableCanvas.setPencilSize;\n\n  // Sets draw color at load and when user clicks color input\n\n\n  function setColor(color) {\n    if (color == \"eraser\") {\n      drawWithEraser();\n    } else {\n      drawWithColor(color);\n    }\n  }\n  // Tap the background to switch its color (usefull for transparent images)\n  (0, _toggleAbleBackground2.default)(background, { onChange: refreshColorPreviewBorder });\n\n  (0, _pencilSizeSlider2.default)(byId(\"pensize\"), {\n    onChange: function onChange(pxSize) {\n      setColorDotSize(pxSize);\n      setPencilSize(pxSize);\n    }\n  });\n\n  (0, _canvasMergerAndDonwloaderLink.makeDownloadLink)(byId(\"download\"), {\n    OrginalImage: OrginalImage,\n    originalFileName: originalFileName,\n    canvas: canvas\n  });\n\n  (0, _detectCtrlS.detectCtrlS)({\n    canvas: canvas,\n    OrginalImage: OrginalImage,\n    originalFileName: originalFileName\n  });\n\n  function clear() {\n    clearColorPicker();\n  }\n}\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (pensizePreview, _ref) {\n  var onColorChange = _ref.onColorChange,\n      elementToContrastWith = _ref.elementToContrastWith,\n      canvasForCursor = _ref.canvasForCursor;\n\n  var pensizePreviewDot = pensizePreview.children[0];\n  var pensizePreviewBorder = pensizePreview.children[1];\n\n  function refreshColorPreviewBorder() {\n    pensizePreviewBorder.style.background = borderColor(currentColor, elementToContrastWith.style.backgroundColor);\n  }\n\n  var currentColor = void 0;\n  function openInitializedColorPicker() {\n    openColorPicker(currentColor, onColorPicked);\n  }\n  pensizePreview.addEventListener(\"click\", openInitializedColorPicker);\n  var previousColor = localStorage.getItem(\"previousColor\") || \"eraser\";\n\n  function onColorPicked(color) {\n    console.log(\"onColorPicked\", color);\n    if (currentColor && color !== currentColor) {\n      // For toggling between last two colors\n      previousColor = currentColor;\n    }\n\n    localStorage.setItem(\"previousColor\", previousColor);\n\n    currentColor = color;\n    setCursor(canvasForCursor, currentSize, currentColor);\n    if (color == \"eraser\") {\n      pensizePreviewDot.style.background = \"\";\n      pensizePreviewDot.classList.add(\"eraser\");\n    } else {\n      pensizePreviewDot.classList.remove(\"eraser\");\n      pensizePreviewDot.style.background = color;\n      refreshColorPreviewBorder();\n    }\n    localStorage.setItem(\"color\", color);\n    onColorChange(color);\n  }\n  var currentSize = void 0;\n  // Should be 10\n  var baseSize = pensizePreviewDot.getBoundingClientRect().width;\n\n  window.addEventListener(\"keydown\", function (ev) {\n    if (String.fromCharCode(ev.which).toLowerCase() === \"x\") {\n      console.log(\"x switching to \" + previousColor);\n      onColorPicked(previousColor);\n    }\n  });\n\n  function setColorDotSize(pxSize) {\n    currentSize = pxSize;\n    setCursor(canvasForCursor, currentSize, currentColor);\n    pensizePreviewDot.style.transform = \"scale(\" + pxSize / baseSize + \")\";\n    pensizePreviewBorder.style.transform = \"scale(\" + (pxSize / baseSize + 1 / baseSize) + \")\";\n  }\n\n  setTimeout(function () {\n    return onColorPicked(localStorage.getItem(\"color\") || DEFAULTCOLOR);\n  });\n\n  return {\n    clearColorPicker: function clearColorPicker() {\n      pensizePreview.removeEventListener(\"click\", openInitializedColorPicker);\n    },\n\n    setColorDotSize: setColorDotSize,\n    refreshColorPreviewBorder: refreshColorPreviewBorder\n  };\n};\n\nvar _colorToRGB = __webpack_require__(6);\n\nvar _palette = __webpack_require__(7);\n\nvar _modal = __webpack_require__(1);\n\nvar DEFAULTCOLOR = \"#2b76ce\";\n\n\nfunction borderColor(foreground, background) {\n  if (foreground == \"eraser\") return \"transparent\";\n  var bgL = (0, _colorToRGB.luminance)(background);\n  var fgL = (0, _colorToRGB.luminance)(foreground);\n  if (bgL > 125 && fgL > 200) return \"black\";\n  if (bgL < 125 && fgL < 25) return \"white\";\n  return \"transparent\";\n}\n\nfunction textColor(background) {\n  return (0, _colorToRGB.luminance)(background) > 255 / 2 ? \"rgba(0,0,0,0.8)\" : \"rgba(255,255,255,0.8)\";\n}\n\nfunction openColorPicker(currentColor, callback) {\n  (0, _modal.createModal)(\"color-modal\", function (_ref2) {\n    var modal = _ref2.modal,\n        closeModal = _ref2.closeModal;\n\n    function pickColor(color) {\n      closeModal();\n      callback(color);\n    }\n\n    _palette.paletteColors.forEach(function (color) {\n      var button = document.createElement(\"button\");\n      button.classList.add(\"colorbutton\");\n      if (color === currentColor) {\n        button.classList.add(\"active\");\n        button.innerHTML = \"Selected\";\n        button.style.color = textColor(color);\n      }\n      button.style.backgroundColor = color.toLowerCase();\n      button.addEventListener(\"click\", function () {\n        return pickColor(color);\n      });\n      modal.appendChild(button);\n    });\n\n    var eraser = document.createElement(\"button\");\n    eraser.classList.add(\"eraser\");\n    eraser.addEventListener(\"click\", function () {\n      return pickColor(\"eraser\");\n    });\n    eraser.innerHTML = '<img src=\"/images/eraser-color.svg\"/><span class=\"imagelabel\">' + (\"eraser\" === currentColor ? \"Eraser selected\" : \"Eraser\") + \"</span>\";\n    modal.appendChild(eraser);\n  });\n}\n\nfunction setCursor(node, size, color) {\n  var s = size < 4 ? 4 : size;\n  var c = document.createElement(\"canvas\");\n  c.width = c.height = s;\n  var ctx = c.getContext(\"2d\");\n\n  if (color == \"eraser\") drawEraser(ctx, s);else drawColorCircle(ctx, s, color);\n  var cursor = c.toDataURL(\"image/png\");\n  node.style.cursor = \"url(\" + cursor + \") \" + s / 2 + \" \" + s / 2 + \",auto\";\n}\n\nfunction drawColorCircle(ctx, s, color) {\n  ctx.beginPath();\n  ctx.arc(s / 2, s / 2, s / 2, 0, 2 * Math.PI, false);\n  ctx.fillStyle = color;\n  ctx.fill();\n}\n\nfunction drawEraser(ctx, s) {\n  ctx.fillStyle = \"#da502d\";\n  ctx.fillRect(0, 0, s * 2 / 3, s);\n  ctx.fillStyle = \"#6584a5\";\n  ctx.fillRect(s * 2 / 3 - 1, 0, s, s);\n  ctx.globalCompositeOperation = \"destination-in\";\n  drawColorCircle(ctx, s, \"white\");\n}\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.colorToRGB = colorToRGB;\nexports.luminance = luminance;\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction colorToRGB(color) {\n  var canvas = document.createElement(\"canvas\");\n  canvas.width = canvas.height = 1;\n  var ctx = canvas.getContext(\"2d\");\n  ctx.clearRect(0, 0, 1, 1);\n  ctx.fillStyle = color;\n  ctx.fillRect(0, 0, 1, 1);\n  return [].concat(_toConsumableArray(ctx.getImageData(0, 0, 1, 1).data)).slice(0, 3);\n}\n\nfunction luminance(color) {\n  return colorToRGB(color).reduce(function (a, b) {\n    return a + b;\n  }, 0) / 3;\n}\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar paletteColors = exports.paletteColors = \"#000000,#FFFFFF,#F44336,#E91E63,#9C27B0,#673AB7,#3F51B5,#2196F3,#03A9F4,#00BCD4,#009688,#4CAF50,#8BC34A,#CDDC39,#FFEB3B,#FFC107,#FF9800,#FF5722,#795548,#9E9E9E,#607D8B\".split(\",\");\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (_ref) {\n  var onImageCreated = _ref.onImageCreated,\n      fileinput = _ref.fileinput,\n      _ref$startTask = _ref.startTask,\n      startTask = _ref$startTask === undefined ? function () {\n    return null;\n  } : _ref$startTask,\n      _ref$endTask = _ref.endTask,\n      endTask = _ref$endTask === undefined ? function () {\n    return null;\n  } : _ref$endTask;\n\n  // Callbacks onImageCreated with img tag and filename\n  var originalFileName = \"pasted-image\";\n  var askingForImage = true;\n\n  // Transforms the file input content to a real image\n  function loadFile(fileToLoad) {\n    startTask();\n    var fileReader = new FileReader();\n    fileReader.onload = function () {\n      createImageWithFileContent(fileReader.result);\n      endTask();\n    };\n    fileReader.onerror = endTask;\n    fileReader.readAsDataURL(fileToLoad);\n  }\n\n  function createImageWithFileContent(result) {\n    startTask();\n    if (!askingForImage) return;\n    var img = new Image();\n    img.onload = function () {\n      askingForImage = false;\n      onImageCreated(img, originalFileName);\n      endTask();\n    };\n    img.onerror = endTask;\n    img.src = result;\n  }\n\n  // Setup of the welcome  UI\n  function askForImage() {\n    fileinput && fileinput.addEventListener(\"change\", fileChanged);\n    function fileChanged(changeEvent) {\n      fileinput.removeEventListener(\"change\", fileChanged);\n      originalFileName = fileinput.value.split(\"\\\\\").pop().split(\".\")[0] || \"image\";\n      loadFile(changeEvent.target.files[0]);\n    }\n  }\n\n  askForImage();\n\n  window.addEventListener(\"paste\", function (ev) {\n    handleDataTransferItems(ev.clipboardData.items);\n  });\n\n  document.body.addEventListener(\"dragover\", function (ev) {\n    ev.preventDefault();\n    ev.stopPropagation();\n  });\n  document.body.addEventListener(\"drop\", function (ev) {\n    ev.preventDefault();\n    ev.stopPropagation();\n    handleDataTransferItems(ev.dataTransfer.items);\n  });\n\n  function handleDataTransferItems(items) {\n    // Tries to paste an image\n    var imageFile = Array.prototype.find.call(items, function (e) {\n      return e.kind == \"file\" && e.type.match(\"image\");\n    });\n    originalFileName = \"pasted-image\";\n    if (imageFile) {\n      loadFile(imageFile.getAsFile());\n      return;\n    }\n    // Tries to load a remote image given its adress\n    var url = Array.prototype.find.call(items, function (e) {\n      return e.kind == \"string\";\n    });\n    if (url) {\n      url.getAsString(function (s) {\n        return createImageWithFileContent(s);\n      });\n    }\n  }\n};\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (background, _ref) {\n  var onChange = _ref.onChange;\n\n  function switchBackground() {\n    currentMode++;\n    localStorage.setItem(\"background\", currentMode);\n    applyBackground();\n  }\n  var switchCount = 0;\n  function applyBackground() {\n    var options = [\"#DDD\", \"#333\"];\n    var current = currentMode % options.length;\n    background.style.backgroundColor = options[current];\n    // let meta = document.getElementById(\"theme-color\");\n    // meta && meta.setAttribute(\"content\", \"#fff\");\n    onChange(current);\n\n    var bclass = document.body.classList;\n    options.forEach(function (color, index) {\n      return bclass.remove(\"background_n_\" + index);\n    });\n    bclass.add(\"background_n_\" + current);\n    // https://www.youtube.com/watch?v=Pr8ETbGz35Q\n    if (switchCount < 8) {\n      console.log(current == 0 ? \"jour !\" : \"nuit !\");\n      switchCount++;\n    } else {\n      console.log(\"Monsieur Jacquouille, je vous en prie, à la longue, ça devient casse-pied !\");\n    }\n  }\n  var currentMode = localStorage.getItem(\"background\") || 0;\n  applyBackground();\n  background.addEventListener(\"click\", switchBackground);\n};\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (canvas, _ref) {\n  var onMouseDown = _ref.onMouseDown,\n      onMouseUp = _ref.onMouseUp,\n      OrginalImage = _ref.OrginalImage;\n\n  // We cache some zoom related data to avoid getting them all the time\n  var scale = void 0,\n      rect = void 0,\n      lastUsedPXsize = void 0;\n\n  function measureScale() {\n    rect = canvas.getBoundingClientRect();\n    scale = rect.width / canvas.width;\n    if (lastUsedPXsize && ctx) {\n      ctx.lineWidth = lastUsedPXsize / scale;\n    }\n  }\n  measureScale();\n\n  window.addEventListener(\"resize\", measureScale);\n\n  var ctx = canvas.getContext(\"2d\");\n\n  // To make the lines look slightly nicer\n  ctx.lineCap = \"round\";\n\n  // We cache the mouse position and previous mouse position.\n  // Theay are defined by touch events, and used by the draw loop\n  var mousePos = {\n    x: 0,\n    y: 0\n  },\n      lastPos = mousePos;\n\n  canvas.addEventListener(\"mousedown\", function (e) {\n    if (e.which == 3) {\n      // We detected a right click on canvas, probably to save it.\n      // We merge the content of the background image with the canvas\n      (0, _canvasMergerAndDonwloaderLink.mergeCanvasAndImage)(canvas, OrginalImage);\n      return;\n    }\n    mousePos = lastPos = getMousePos(e);\n    startDrawLoop();\n    onMouseDown();\n  }, false);\n\n  // Allow ctrl-c > pasting to word & co\n  document.addEventListener(\"copy\", function (ev) {\n    ev.preventDefault();\n    (0, _canvasMergerAndDonwloaderLink.mergeCanvasAndImage)(canvas, OrginalImage);\n    ev.clipboardData.setData(\"text/html\", '<img src=\"' + canvas.toDataURL() + '\"/>');\n  });\n\n  document.addEventListener(\"mouseup\", endDrawLoop, false);\n\n  canvas.addEventListener(\"mousemove\", function (e) {\n    mousePos = getMousePos(e);\n  }, false);\n\n  // Get the position of the mouse relative to the canvas\n  function getMousePos(mouseEvent) {\n    return {\n      x: (mouseEvent.clientX - rect.left) / scale,\n      y: (mouseEvent.clientY - rect.top) / scale\n    };\n  }\n\n  // Drawing loop is separated from the events￼\n\n  var isDrawing = false;\n\n  function startDrawLoop() {\n    if (isDrawing) return;\n    isDrawing = true;\n    ctx.beginPath();\n    drawLoop();\n  }\n  function endDrawLoop() {\n    isDrawing && onMouseUp();\n    isDrawing = false;\n  }\n\n  function drawLoop() {\n    if (isDrawing) {\n      window.requestAnimationFrame(drawLoop);\n      renderCanvas();\n    }\n  }\n  function renderCanvas() {\n    ctx.moveTo(lastPos.x, lastPos.y);\n    ctx.lineTo(mousePos.x, mousePos.y);\n    ctx.stroke();\n    lastPos = mousePos;\n  }\n\n  // Proxy mobile events to their mouse counterpart\n  function proxyTouchToMouse(touchEventName, mouseEventName) {\n    var eventTarget = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : canvas;\n\n    canvas.addEventListener(touchEventName, function (e) {\n      e.preventDefault();\n\n      var _ref2 = e.touches[0] || {},\n          clientX = _ref2.clientX,\n          clientY = _ref2.clientY;\n\n      var mouseEvent = new MouseEvent(mouseEventName, {\n        clientX: clientX,\n        clientY: clientY\n      });\n      eventTarget.dispatchEvent(mouseEvent);\n    }, false);\n  }\n  proxyTouchToMouse(\"touchstart\", \"mousedown\");\n  proxyTouchToMouse(\"touchend\", \"mouseup\", document);\n  proxyTouchToMouse(\"touchmove\", \"mousemove\");\n\n  return {\n    drawWithEraser: function drawWithEraser() {\n      ctx.globalCompositeOperation = \"destination-out\";\n    },\n    drawWithColor: function drawWithColor(color) {\n      ctx.globalCompositeOperation = \"source-over\";\n      ctx.strokeStyle = color;\n    },\n    setPencilSize: function setPencilSize(pxSize) {\n      lastUsedPXsize = pxSize;\n      ctx.lineWidth = pxSize / scale;\n    }\n  };\n};\n\nvar _canvasMergerAndDonwloaderLink = __webpack_require__(0);\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.showDownloadOptions = showDownloadOptions;\n\nvar _modal = __webpack_require__(1);\n\nfunction _objectDestructuringEmpty(obj) { if (obj == null) throw new TypeError(\"Cannot destructure undefined\"); }\n\n// Start downloading in the background, show modal with some options\nfunction showDownloadOptions(_ref) {\n  _objectDestructuringEmpty(_ref);\n\n  return (0, _modal.createModal)(\"file-download\", function (_ref2) {\n    var modal = _ref2.modal,\n        closeModal = _ref2.closeModal;\n\n    modal.innerHTML = \"\\n        <p id=\\\"downloadIndicator\\\">Your download is getting ready</p>\\n\\n        \" + addToHomeScreen() + \"\\n\\n          <a class=\\\"facebookLink\\\" target=\\\"_blank\\\" href=\\\"https://www.facebook.com/minimage.tk\\\">\\n            Like our facebook page\\n          </a>\\n\\n\\n          <a class=\\\"githubLink\\\" target=\\\"_blank\\\" href=\\\"https://github.com/renanlecaro/minimage\\\">\\n            This app is open source. See the source code on github.\\n          </a>\\n\\n\\n\\n\\n          <p class=\\\"pcHint\\\">Pressing <strong>\\\"X\\\"</strong> will switch between the last 2 used colors.</p>\\n          <p class=\\\"pcHint\\\">You can edit transparent pngs and keep them transparent</p>\\n          <p class=\\\"pcHint\\\">Clicking the background around the picture will switch between light and dark background</p>\\n\\n            <p class=\\\"pcHint\\\">You can <strong>paste an image in the page</strong> and it will be loaded</p>\\n            <p class=\\\"pcHint\\\">You can <strong>drop an image file in the page</strong> and it will be loaded</p>\\n            <p class=\\\"pcHint\\\">You can right click the canvas and copy its content</p>\\n            <p class=\\\"pcHint\\\">Pressing <strong>ctrl+s</strong> will trigger the download of the picture</p>\\n\\n\\n\\n\\n      \";\n    function reportDLStatus(className, text) {\n      var p = document.getElementById(\"downloadIndicator\");\n      p.classList.add(className);\n      p.innerHTML = text;\n    }\n\n    modal.addEventListener(\"click\", function (ev) {\n      var targetClass = ev.target.getAttribute(\"class\");\n\n      if (targetClass == \"keepDrawing\") return closeModal();\n\n      if (targetClass == \"newPicture\") return window.location.reload();\n\n      return console.log(\"unrecognized click \", ev);\n    });\n\n    var _failed = false;\n    return {\n      failed: function failed(exeption) {\n        _failed = true;\n        reportDLStatus(\"failed\", \"\\n          It looks like the download failed, sorry about that.\\n          It works best on google chrome.\\n          <pre>\" + exeption.stack + \"</pre>\\n        \");\n      },\n      suceeded: function suceeded() {\n        if (_failed) return;\n        reportDLStatus(\"sucess\", \"\\n        <div>Download started</div>\\n        <button class=\\\"keepDrawing\\\">Keep drawing on that picture</button>\\n        <button class=\\\"newPicture\\\">Start with a new picture</button>\\n        \");\n      }\n    };\n  });\n}\n\nfunction addToHomeScreen() {\n  // Show invitation to add to home screen if not already the\n  //case\n\n  if (!navigator.userAgent.match(/Android/i)) return \"\";\n\n  if (window.location.search === \"?fromHomeScreen\") {\n    return \"\";\n  }\n\n  return \"\\n    <p>You can add this app to your home screen and it will work\\n      offline and in full screen.\\n    </p>\\n    \";\n}\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (slider, _ref) {\n  var onChange = _ref.onChange;\n\n  // Sets draw size at load and style when the user interracts with the slider\n  function onPencilSizeChange(pxSize) {\n    slider.value = pxSize;\n    localStorage.setItem(\"pensize\", pxSize);\n    onChange(pxSize);\n  }\n  slider.addEventListener(\"input\", function (e) {\n    return onPencilSizeChange(e.target.value);\n  });\n  onPencilSizeChange(parseInt(localStorage.getItem(\"pensize\")) || DEFAULTSIZE);\n};\n\nvar DEFAULTSIZE = 20;\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (canvas, _ref) {\n  var fitWindow = _ref.fitWindow;\n\n  var ctx = void 0,\n      w = void 0,\n      h = void 0;\n  var bgColor = \"#F44336\"; //randomColor(darkCoolColors);\n  function reset() {\n    if (fitWindow) {\n      canvas.width = window.innerWidth;\n      canvas.height = window.innerHeight;\n    }\n    w = canvas.width;\n    h = canvas.height;\n    ctx = canvas.getContext(\"2d\");\n    ctx.fillStyle = bgColor;\n    ctx.fillRect(0, 0, w, h);\n    ctx.lineCap = \"round\";\n    randomizeInst();\n  }\n\n  var position = void 0,\n      speed = void 0,\n      acceleration = void 0,\n      timeoutHandle = void 0,\n      accelerationTimeoutHandle = void 0;\n  function randomizeInst() {\n    position = {\n      // x: Math.random() * w,\n      // y: Math.random() * h\n      x: w / 2,\n      y: h / 2\n    };\n    speed = {\n      x: Math.random() * 10 - 5,\n      y: Math.random() * 10 - 5\n    };\n    acceleration = {\n      x: Math.random() * 10 - 5,\n      y: Math.random() * 10 - 5\n    };\n\n    ctx.strokeStyle = randomColor(coolColors, bgColor);\n    ctx.lineWidth = 20 + Math.random() * 40;\n    ctx.beginPath();\n    ctx.moveTo(position.x, position.y);\n  }\n\n  reset();\n  window.addEventListener(\"resize\", reset);\n\n  function randomAcceletation() {\n    acceleration = {\n      x: Math.random() * 2 - 1,\n      y: Math.random() * 2 - 1\n    };\n    // speed.x*=0.2;\n    // speed.y*=0.2;\n\n    accelerationTimeoutHandle = setTimeout(randomAcceletation, 100 + Math.random() * 200);\n  }\n  randomAcceletation();\n  function renderCanvas() {\n    ctx.moveTo(position.x, position.y);\n    speed.x *= 0.95;\n    speed.y *= 0.95;\n\n    speed.x += acceleration.x;\n    speed.y += acceleration.y;\n    position.x += speed.x;\n    position.y += speed.y;\n    ctx.lineTo(position.x, position.y);\n    ctx.stroke();\n    if (position.x < -50 || position.x > w + 50 || position.y < -50 || position.y > h + 50) randomizeInst();\n  }\n\n  var isDrawing = true;\n  function drawLoop() {\n    if (isDrawing) {\n      window.requestAnimationFrame(drawLoop);\n      renderCanvas();\n    }\n  }\n\n  drawLoop();\n\n  function stopAnim() {\n    isDrawing = false;\n    clearTimeout(accelerationTimeoutHandle);\n    window.removeEventListener(\"resize\", reset);\n  }\n\n  return {\n    stopAnim: stopAnim,\n    bgColor: bgColor\n  };\n};\n\nvar coolColors = \"#F44336,#E91E63,#9C27B0,#673AB7,#3F51B5,#2196F3,#03A9F4,#00BCD4,#009688,#4CAF50,#8BC34A,#CDDC39,#FFEB3B,#FFC107,#FF9800,#FF5722\".split(\",\");\n\n//import { luminance } from \"./colorToRGB.js\";\n// const darkCoolColors = coolColors.filter(c => luminance(c) < 150);\n\nfunction randomColor(colorPool) {\n  var exception = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n\n  var withoutEx = colorPool.filter(function (c) {\n    return c != exception;\n  });\n  return withoutEx[Math.floor(Math.random() * withoutEx.length)];\n}\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.checkRunWithinWebview = checkRunWithinWebview;\nfunction checkRunWithinWebview() {\n  if (navigator.userAgent.match(/Android/i)) {\n    var JSONPcall = document.createElement(\"script\");\n    JSONPcall.src = \"https://iswebview.herokuapp.com/?callback=JSONPcallback\";\n    // JSONPcall.src = \"https://iswebview2repo-iswebview2.7e14.starter-us-west-2.openshiftapps.com/?callback=JSONPcallback\";\n    document.body.appendChild(JSONPcall);\n  }\n}\nwindow.JSONPcallback = function (result) {\n  if (result.isWebView) {\n    document.body.classList.add(\"runningWithinWebview\");\n    document.body.innerHTML = \"\\n      Please open minimage.tk with chrome,\\n       it cannot work within another app.\\n\\n        There may be an option in the menu above the page,\\n         something like \\\"Open in Chrome\\\".\\n\\n         \";\n  }\n};\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.startTask = startTask;\nexports.endTask = endTask;\nexports.updateLook = updateLook;\nvar tasksInProgress = 0;\nfunction startTask() {\n  tasksInProgress++;\n  updateLook();\n}\n\nfunction endTask() {\n  tasksInProgress--;\n  setTimeout(updateLook);\n}\n\nfunction updateLook() {\n  spinners.classList[tasksInProgress ? \"remove\" : \"add\"](\"hidden\");\n}\ndocument.addEventListener(\"DOMContentLoaded\", updateLook);\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.detectCtrlS = detectCtrlS;\n\nvar _canvasMergerAndDonwloaderLink = __webpack_require__(0);\n\nfunction detectCtrlS(_ref) {\n  var canvas = _ref.canvas,\n      OrginalImage = _ref.OrginalImage,\n      originalFileName = _ref.originalFileName;\n\n  window.addEventListener(\"keydown\", function (event) {\n    if (event.ctrlKey || event.metaKey) {\n      if (String.fromCharCode(event.which).toLowerCase() === \"s\") {\n        event.preventDefault();\n        (0, _canvasMergerAndDonwloaderLink.triggerDownload)(canvas, originalFileName, OrginalImage);\n      }\n    }\n  });\n}\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports) {\n\nvar appCacheIframe;\n\nfunction hasSW() {\n  return 'serviceWorker' in navigator &&\n    // This is how I block Chrome 40 and detect Chrome 41, because first has\n    // bugs with history.pustState and/or hashchange\n    (window.fetch || 'imageRendering' in document.documentElement.style) &&\n    (window.location.protocol === 'https:' || window.location.hostname === 'localhost' || window.location.hostname.indexOf('127.') === 0)\n}\n\nfunction install(options) {\n  options || (options = {});\n\n  \n    if (hasSW()) {\n      var registration = navigator.serviceWorker\n        .register(\n          \"/sw.js\"\n          \n        );\n\n      \n\n      return;\n    }\n  \n\n  \n    if (window.applicationCache) {\n      var directory = \"/appcache/\";\n      var name = \"manifest\";\n\n      var doLoad = function() {\n        var page = directory + name + '.html';\n        var iframe = document.createElement('iframe');\n\n        \n\n        iframe.src = page;\n        iframe.style.display = 'none';\n\n        appCacheIframe = iframe;\n        document.body.appendChild(iframe);\n      };\n\n      if (document.readyState === 'complete') {\n        setTimeout(doLoad);\n      } else {\n        window.addEventListener('load', doLoad);\n      }\n\n      return;\n    }\n  \n}\n\nfunction applyUpdate(callback, errback) {\n  \n\n  \n}\n\nfunction update() {\n  \n    if (hasSW()) {\n      navigator.serviceWorker.getRegistration().then(function(registration) {\n        if (!registration) return;\n        return registration.update();\n      });\n    }\n  \n\n  \n    if (appCacheIframe) {\n      try {\n        appCacheIframe.contentWindow.applicationCache.update();\n      } catch (e) {}\n    }\n  \n}\n\n\n\nexports.install = install;\nexports.applyUpdate = applyUpdate;\nexports.update = update;\n\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// bundle.c14f881344d79b6d5899.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c14f881344d79b6d5899","import { showDownloadOptions } from \"./showDownloadOptions.js\";\n\nexport function makeDownloadLink(\n  link,\n  { OrginalImage, canvas, originalFileName }\n) {\n  // Download button\n  function downloadImage(e) {\n    e.preventDefault();\n    let { failed, suceeded } = showDownloadOptions({});\n    triggerDownload(canvas, originalFileName, OrginalImage, failed, suceeded);\n  }\n  link.addEventListener(\"click\", downloadImage);\n}\n\nfunction nope(e) {\n  console.log(e);\n}\nvar downloadCounter = 0;\nexport function triggerDownload(\n  canvas,\n  originalFileName,\n  OrginalImage,\n  failed = nope,\n  suceeded = nope\n) {\n  let filename = originalFileName + \"-minimage-\" + downloadCounter + \".png\";\n  mergeCanvasAndImage(canvas, OrginalImage, failed, suceeded);\n  downloadCanvas(canvas, filename, failed, suceeded);\n\n  downloadCounter++;\n}\n\nexport function mergeCanvasAndImage(canvas, img, failed, suceeded) {\n  try {\n    // Pastes the image as a canvas background\n    var ctx = canvas.getContext(\"2d\");\n    let oldComposite = ctx.globalCompositeOperation;\n    ctx.globalCompositeOperation = \"destination-over\";\n\n    // Draw the orignal image\n    ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n\n    ctx.globalCompositeOperation = oldComposite;\n    suceeded && setTimeout(suceeded);\n    return canvas;\n  } catch (e) {\n    failed && failed(e);\n  }\n}\n\nfunction downloadCanvas(canvas, filename, failed, suceeded) {\n  try {\n    canvas.toBlob(function(blob) {\n      try {\n        if (window.navigator.msSaveOrOpenBlob) {\n          window.navigator.msSaveBlob(blob, filename);\n          suceeded && setTimeout(suceeded);\n        } else {\n          let url = window.URL.createObjectURL(blob);\n          let link = document.createElement(\"a\");\n          document.body.appendChild(link);\n          link.setAttribute(\"href\", url);\n          link.setAttribute(\"download\", filename);\n          link.click();\n          suceeded && setTimeout(suceeded);\n          setTimeout(() => {\n            window.URL.revokeObjectURL(url);\n            document.body.removeChild(link);\n          }, 3000);\n        }\n      } catch (e) {\n        failed && failed(e);\n      }\n    });\n  } catch (e) {\n    failed && failed(e);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/canvasMergerAndDonwloaderLink.js","let modalZindex = 4;\nexport function createModal(className, callback) {\n  let modal = document.createElement(\"div\");\n  modal.classList.add(\"modal\");\n  modal.classList.add(className);\n  document.body.appendChild(modal);\n\n  let backdrop = document.createElement(\"div\");\n  backdrop.classList.add(\"modal-backdrop\");\n  document.body.appendChild(backdrop);\n\n  backdrop.style.zIndex = modalZindex;\n  modal.style.zIndex = modalZindex + 1;\n  backdrop.addEventListener(\"click\", closeModal);\n  document.addEventListener(\"keyup\", closeOnEscape);\n  function closeOnEscape(ev) {\n    if (\n      ev.which == 27 // escape key\n    )\n      closeModal();\n  }\n  function closeModal() {\n    modal.classList.add(\"closing\");\n    backdrop.classList.add(\"closing\");\n    setTimeout(() => {\n      document.body.removeChild(modal);\n      document.body.removeChild(backdrop);\n    }, 300);\n    document.removeEventListener(\"keyup\", closeOnEscape);\n  }\n  modalZindex += 2;\n  return callback({ modal, closeModal });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modal.js","/*\n\nSee the app in action here : https://minimage.tk\n\n*/\nimport \"./styles.less\";\nimport setupColorPicker from \"./colorPicker.js\";\nimport askForIMG from \"./getAnImage.js\";\nimport toggleAbleBackground from \"./toggleAbleBackground.js\";\nimport setupEditableCanvas from \"./editableCanvas.js\";\nimport { makeDownloadLink } from \"./canvasMergerAndDonwloaderLink.js\";\nimport pencilSizeSlider from \"./pencilSizeSlider.js\";\nimport welcomeAnim from \"./welcomeAnim.js\";\nimport { checkRunWithinWebview } from \"./checkRunWithinWebview.js\";\nimport { startTask, endTask } from \"./spinners.js\";\nconst byId = document.getElementById.bind(document);\nimport { detectCtrlS } from \"./detectCtrlS.js\";\n\nimport * as OfflinePluginRuntime from \"offline-plugin/runtime\";\nOfflinePluginRuntime.install();\n\ncheckRunWithinWebview();\nlet originalFileName, OrginalImage;\naskForIMG({\n  fileinput: byId(\"fileinput\"),\n  onImageCreated: (img, filename) => {\n    originalFileName = filename;\n    letUserDrawAndDownload(img);\n  },\n  startTask,\n  endTask\n});\n\nlet { stopAnim, bgColor } = welcomeAnim(byId(\"welcome\"), { fitWindow: true });\nbyId(\"fileInputWrapper\").style.color = bgColor;\n\n// Lets the user draw on the loaded image\nfunction letUserDrawAndDownload(img) {\n  OrginalImage = img;\n  stopAnim();\n  const canvas = byId(\"drawzone\"),\n    drawzoneWrapper = byId(\"drawzoneWrapper\");\n\n  // Switch to drawing mode\n  byId(\"inputForAFile\").style.display = \"none\";\n  byId(\"drawAndDownload\").style.display = \"\";\n\n  console.log(img.width, img.height);\n  let maxRes = Math.max(window.innerWidth, window.innerHeight) * 2;\n  // Fits the canvas to screen\n  let imgScale = Math.max(img.width / maxRes, img.height / maxRes, 1);\n  img.width = canvas.width = img.width / imgScale;\n  img.height = canvas.height = img.height / imgScale;\n  drawzoneWrapper.style.maxWidth = img.width;\n  drawzoneWrapper.style.maxHeight = img.height;\n\n  // Needs to happen AFTER size measurements\n  drawzoneWrapper.appendChild(img);\n\n  let ctx = canvas.getContext(\"2d\");\n  let hasDoneFirstDraw = false;\n  let barClass = byId(\"topbar\").classList;\n\n  let background = byId(\"background\");\n\n  const {\n    setColorDotSize,\n    refreshColorPreviewBorder,\n    clearColorPicker\n  } = setupColorPicker(byId(\"pensizePreview\"), {\n    canvasForCursor: canvas,\n    onColorChange: setColor,\n    elementToContrastWith: background\n  });\n\n  let {\n    drawWithColor,\n    drawWithEraser,\n    setPencilSize\n  } = setupEditableCanvas(canvas, {\n    onMouseDown() {\n      if (canvas.getClientRects()[0].height + 2 * 80 > window.innerHeight) {\n        barClass.add(\"drawInProgress\");\n      }\n    },\n    onMouseUp() {\n      if (!hasDoneFirstDraw) {\n        hasDoneFirstDraw = true;\n        download.classList.add(\"usable\");\n      }\n      barClass.remove(\"drawInProgress\");\n    },\n    OrginalImage\n  });\n\n  // Sets draw color at load and when user clicks color input\n  function setColor(color) {\n    if (color == \"eraser\") {\n      drawWithEraser();\n    } else {\n      drawWithColor(color);\n    }\n  }\n  // Tap the background to switch its color (usefull for transparent images)\n  toggleAbleBackground(background, { onChange: refreshColorPreviewBorder });\n\n  pencilSizeSlider(byId(\"pensize\"), {\n    onChange(pxSize) {\n      setColorDotSize(pxSize);\n      setPencilSize(pxSize);\n    }\n  });\n\n  makeDownloadLink(byId(\"download\"), {\n    OrginalImage,\n    originalFileName,\n    canvas\n  });\n\n  detectCtrlS({\n    canvas,\n    OrginalImage,\n    originalFileName\n  });\n\n  function clear() {\n    clearColorPicker();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app.js","const DEFAULTCOLOR = \"#2b76ce\";\nimport { luminance } from \"./colorToRGB.js\";\nimport { paletteColors } from \"./palette.js\";\nimport { createModal } from \"./modal.js\";\nexport default function(\n  pensizePreview,\n  { onColorChange, elementToContrastWith, canvasForCursor }\n) {\n  const pensizePreviewDot = pensizePreview.children[0];\n  const pensizePreviewBorder = pensizePreview.children[1];\n\n  function refreshColorPreviewBorder() {\n    pensizePreviewBorder.style.background = borderColor(\n      currentColor,\n      elementToContrastWith.style.backgroundColor\n    );\n  }\n\n  let currentColor;\n  function openInitializedColorPicker() {\n    openColorPicker(currentColor, onColorPicked);\n  }\n  pensizePreview.addEventListener(\"click\", openInitializedColorPicker);\n  let previousColor = localStorage.getItem(\"previousColor\") || \"eraser\";\n\n  function onColorPicked(color) {\n    console.log(\"onColorPicked\", color);\n    if (currentColor && color !== currentColor) {\n      // For toggling between last two colors\n      previousColor = currentColor;\n    }\n\n    localStorage.setItem(\"previousColor\", previousColor);\n\n    currentColor = color;\n    setCursor(canvasForCursor, currentSize, currentColor);\n    if (color == \"eraser\") {\n      pensizePreviewDot.style.background = \"\";\n      pensizePreviewDot.classList.add(\"eraser\");\n    } else {\n      pensizePreviewDot.classList.remove(\"eraser\");\n      pensizePreviewDot.style.background = color;\n      refreshColorPreviewBorder();\n    }\n    localStorage.setItem(\"color\", color);\n    onColorChange(color);\n  }\n  let currentSize;\n  // Should be 10\n  const baseSize = pensizePreviewDot.getBoundingClientRect().width;\n\n  window.addEventListener(\"keydown\", ev => {\n    if (String.fromCharCode(ev.which).toLowerCase() === \"x\") {\n      console.log(\"x switching to \" + previousColor);\n      onColorPicked(previousColor);\n    }\n  });\n\n  function setColorDotSize(pxSize) {\n    currentSize = pxSize;\n    setCursor(canvasForCursor, currentSize, currentColor);\n    pensizePreviewDot.style.transform = \"scale(\" + pxSize / baseSize + \")\";\n    pensizePreviewBorder.style.transform =\n      \"scale(\" + (pxSize / baseSize + 1 / baseSize) + \")\";\n  }\n\n  setTimeout(() =>\n    onColorPicked(localStorage.getItem(\"color\") || DEFAULTCOLOR)\n  );\n\n  return {\n    clearColorPicker() {\n      pensizePreview.removeEventListener(\"click\", openInitializedColorPicker);\n    },\n    setColorDotSize,\n    refreshColorPreviewBorder\n  };\n}\n\nfunction borderColor(foreground, background) {\n  if (foreground == \"eraser\") return \"transparent\";\n  let bgL = luminance(background);\n  let fgL = luminance(foreground);\n  if (bgL > 125 && fgL > 200) return \"black\";\n  if (bgL < 125 && fgL < 25) return \"white\";\n  return \"transparent\";\n}\n\nfunction textColor(background) {\n  return luminance(background) > 255 / 2\n    ? \"rgba(0,0,0,0.8)\"\n    : \"rgba(255,255,255,0.8)\";\n}\n\nfunction openColorPicker(currentColor, callback) {\n  createModal(\"color-modal\", ({ modal, closeModal }) => {\n    function pickColor(color) {\n      closeModal();\n      callback(color);\n    }\n\n    paletteColors.forEach(color => {\n      let button = document.createElement(\"button\");\n      button.classList.add(\"colorbutton\");\n      if (color === currentColor) {\n        button.classList.add(\"active\");\n        button.innerHTML = \"Selected\";\n        button.style.color = textColor(color);\n      }\n      button.style.backgroundColor = color.toLowerCase();\n      button.addEventListener(\"click\", () => pickColor(color));\n      modal.appendChild(button);\n    });\n\n    let eraser = document.createElement(\"button\");\n    eraser.classList.add(\"eraser\");\n    eraser.addEventListener(\"click\", () => pickColor(\"eraser\"));\n    eraser.innerHTML =\n      '<img src=\"/images/eraser-color.svg\"/><span class=\"imagelabel\">' +\n      (\"eraser\" === currentColor ? \"Eraser selected\" : \"Eraser\") +\n      \"</span>\";\n    modal.appendChild(eraser);\n  });\n}\n\nfunction setCursor(node, size, color) {\n  let s = size < 4 ? 4 : size;\n  let c = document.createElement(\"canvas\");\n  c.width = c.height = s;\n  let ctx = c.getContext(\"2d\");\n\n  if (color == \"eraser\") drawEraser(ctx, s);\n  else drawColorCircle(ctx, s, color);\n  let cursor = c.toDataURL(\"image/png\");\n  node.style.cursor = `url(${cursor}) ${s / 2} ${s / 2},auto`;\n}\n\nfunction drawColorCircle(ctx, s, color) {\n  ctx.beginPath();\n  ctx.arc(s / 2, s / 2, s / 2, 0, 2 * Math.PI, false);\n  ctx.fillStyle = color;\n  ctx.fill();\n}\n\nfunction drawEraser(ctx, s) {\n  ctx.fillStyle = \"#da502d\";\n  ctx.fillRect(0, 0, s * 2 / 3, s);\n  ctx.fillStyle = \"#6584a5\";\n  ctx.fillRect(s * 2 / 3 - 1, 0, s, s);\n  ctx.globalCompositeOperation = \"destination-in\";\n  drawColorCircle(ctx, s, \"white\");\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/colorPicker.js","export function colorToRGB(color) {\n  var canvas = document.createElement(\"canvas\");\n  canvas.width = canvas.height = 1;\n  var ctx = canvas.getContext(\"2d\");\n  ctx.clearRect(0, 0, 1, 1);\n  ctx.fillStyle = color;\n  ctx.fillRect(0, 0, 1, 1);\n  return [...ctx.getImageData(0, 0, 1, 1).data].slice(0, 3);\n}\n\nexport function luminance(color) {\n  return colorToRGB(color).reduce((a, b) => a + b, 0) / 3;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/colorToRGB.js","export const paletteColors = \"#000000,#FFFFFF,#F44336,#E91E63,#9C27B0,#673AB7,#3F51B5,#2196F3,#03A9F4,#00BCD4,#009688,#4CAF50,#8BC34A,#CDDC39,#FFEB3B,#FFC107,#FF9800,#FF5722,#795548,#9E9E9E,#607D8B\".split(\n  \",\"\n);\n\n\n\n// WEBPACK FOOTER //\n// ./src/palette.js","export default function({\n  onImageCreated,\n  fileinput,\n  startTask = () => null,\n  endTask = () => null\n}) {\n  // Callbacks onImageCreated with img tag and filename\n  let originalFileName = \"pasted-image\";\n  let askingForImage = true;\n\n  // Transforms the file input content to a real image\n  function loadFile(fileToLoad) {\n    startTask();\n    let fileReader = new FileReader();\n    fileReader.onload = () => {\n      createImageWithFileContent(fileReader.result);\n      endTask();\n    };\n    fileReader.onerror = endTask;\n    fileReader.readAsDataURL(fileToLoad);\n  }\n\n  function createImageWithFileContent(result) {\n    startTask();\n    if (!askingForImage) return;\n    let img = new Image();\n    img.onload = () => {\n      askingForImage = false;\n      onImageCreated(img, originalFileName);\n      endTask();\n    };\n    img.onerror = endTask;\n    img.src = result;\n  }\n\n  // Setup of the welcome  UI\n  function askForImage() {\n    fileinput && fileinput.addEventListener(\"change\", fileChanged);\n    function fileChanged(changeEvent) {\n      fileinput.removeEventListener(\"change\", fileChanged);\n      originalFileName =\n        fileinput.value.split(\"\\\\\").pop().split(\".\")[0] || \"image\";\n      loadFile(changeEvent.target.files[0]);\n    }\n  }\n\n  askForImage();\n\n  window.addEventListener(\"paste\", function(ev) {\n    handleDataTransferItems(ev.clipboardData.items);\n  });\n\n  document.body.addEventListener(\"dragover\", function(ev) {\n    ev.preventDefault();\n    ev.stopPropagation();\n  });\n  document.body.addEventListener(\"drop\", function(ev) {\n    ev.preventDefault();\n    ev.stopPropagation();\n    handleDataTransferItems(ev.dataTransfer.items);\n  });\n\n  function handleDataTransferItems(items) {\n    // Tries to paste an image\n    let imageFile = Array.prototype.find.call(\n      items,\n      e => e.kind == \"file\" && e.type.match(\"image\")\n    );\n    originalFileName = \"pasted-image\";\n    if (imageFile) {\n      loadFile(imageFile.getAsFile());\n      return;\n    }\n    // Tries to load a remote image given its adress\n    let url = Array.prototype.find.call(items, e => e.kind == \"string\");\n    if (url) {\n      url.getAsString(s => createImageWithFileContent(s));\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/getAnImage.js","export default function(background, { onChange }) {\n  function switchBackground() {\n    currentMode++;\n    localStorage.setItem(\"background\", currentMode);\n    applyBackground();\n  }\n  let switchCount = 0;\n  function applyBackground() {\n    let options = [\"#DDD\", \"#333\"];\n    let current = currentMode % options.length;\n    background.style.backgroundColor = options[current];\n    // let meta = document.getElementById(\"theme-color\");\n    // meta && meta.setAttribute(\"content\", \"#fff\");\n    onChange(current);\n\n    let bclass = document.body.classList;\n    options.forEach((color, index) => bclass.remove(\"background_n_\" + index));\n    bclass.add(\"background_n_\" + current);\n    // https://www.youtube.com/watch?v=Pr8ETbGz35Q\n    if (switchCount < 8) {\n      console.log(current == 0 ? \"jour !\" : \"nuit !\");\n      switchCount++;\n    } else {\n      console.log(\n        \"Monsieur Jacquouille, je vous en prie, à la longue, ça devient casse-pied !\"\n      );\n    }\n  }\n  let currentMode = localStorage.getItem(\"background\") || 0;\n  applyBackground();\n  background.addEventListener(\"click\", switchBackground);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/toggleAbleBackground.js","import { mergeCanvasAndImage } from \"./canvasMergerAndDonwloaderLink.js\";\n\nexport default function(canvas, { onMouseDown, onMouseUp, OrginalImage }) {\n  // We cache some zoom related data to avoid getting them all the time\n  let scale, rect, lastUsedPXsize;\n\n  function measureScale() {\n    rect = canvas.getBoundingClientRect();\n    scale = rect.width / canvas.width;\n    if (lastUsedPXsize && ctx) {\n      ctx.lineWidth = lastUsedPXsize / scale;\n    }\n  }\n  measureScale();\n\n  window.addEventListener(\"resize\", measureScale);\n\n  let ctx = canvas.getContext(\"2d\");\n\n  // To make the lines look slightly nicer\n  ctx.lineCap = \"round\";\n\n  // We cache the mouse position and previous mouse position.\n  // Theay are defined by touch events, and used by the draw loop\n  let mousePos = {\n      x: 0,\n      y: 0\n    },\n    lastPos = mousePos;\n\n  canvas.addEventListener(\n    \"mousedown\",\n    function(e) {\n      if (e.which == 3) {\n        // We detected a right click on canvas, probably to save it.\n        // We merge the content of the background image with the canvas\n        mergeCanvasAndImage(canvas, OrginalImage);\n        return;\n      }\n      mousePos = lastPos = getMousePos(e);\n      startDrawLoop();\n      onMouseDown();\n    },\n    false\n  );\n\n  // Allow ctrl-c > pasting to word & co\n  document.addEventListener(\"copy\", ev => {\n    ev.preventDefault();\n    mergeCanvasAndImage(canvas, OrginalImage);\n    ev.clipboardData.setData(\n      \"text/html\",\n      '<img src=\"' + canvas.toDataURL() + '\"/>'\n    );\n  });\n\n  document.addEventListener(\"mouseup\", endDrawLoop, false);\n\n  canvas.addEventListener(\n    \"mousemove\",\n    function(e) {\n      mousePos = getMousePos(e);\n    },\n    false\n  );\n\n  // Get the position of the mouse relative to the canvas\n  function getMousePos(mouseEvent) {\n    return {\n      x: (mouseEvent.clientX - rect.left) / scale,\n      y: (mouseEvent.clientY - rect.top) / scale\n    };\n  }\n\n  // Drawing loop is separated from the events￼\n\n  let isDrawing = false;\n\n  function startDrawLoop() {\n    if (isDrawing) return;\n    isDrawing = true;\n    ctx.beginPath();\n    drawLoop();\n  }\n  function endDrawLoop() {\n    isDrawing && onMouseUp();\n    isDrawing = false;\n  }\n\n  function drawLoop() {\n    if (isDrawing) {\n      window.requestAnimationFrame(drawLoop);\n      renderCanvas();\n    }\n  }\n  function renderCanvas() {\n    ctx.moveTo(lastPos.x, lastPos.y);\n    ctx.lineTo(mousePos.x, mousePos.y);\n    ctx.stroke();\n    lastPos = mousePos;\n  }\n\n  // Proxy mobile events to their mouse counterpart\n  function proxyTouchToMouse(\n    touchEventName,\n    mouseEventName,\n    eventTarget = canvas\n  ) {\n    canvas.addEventListener(\n      touchEventName,\n      function(e) {\n        e.preventDefault();\n        let { clientX, clientY } = e.touches[0] || {};\n        let mouseEvent = new MouseEvent(mouseEventName, {\n          clientX,\n          clientY\n        });\n        eventTarget.dispatchEvent(mouseEvent);\n      },\n      false\n    );\n  }\n  proxyTouchToMouse(\"touchstart\", \"mousedown\");\n  proxyTouchToMouse(\"touchend\", \"mouseup\", document);\n  proxyTouchToMouse(\"touchmove\", \"mousemove\");\n\n  return {\n    drawWithEraser() {\n      ctx.globalCompositeOperation = \"destination-out\";\n    },\n    drawWithColor(color) {\n      ctx.globalCompositeOperation = \"source-over\";\n      ctx.strokeStyle = color;\n    },\n    setPencilSize(pxSize) {\n      lastUsedPXsize = pxSize;\n      ctx.lineWidth = pxSize / scale;\n    }\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/editableCanvas.js","import { createModal } from \"./modal.js\";\n\n// Start downloading in the background, show modal with some options\nexport function showDownloadOptions({}) {\n  return createModal(\"file-download\", ({ modal, closeModal }) => {\n    modal.innerHTML = `\n        <p id=\"downloadIndicator\">Your download is getting ready</p>\n\n        ${addToHomeScreen()}\n\n          <a class=\"facebookLink\" target=\"_blank\" href=\"https://www.facebook.com/minimage.tk\">\n            Like our facebook page\n          </a>\n\n\n          <a class=\"githubLink\" target=\"_blank\" href=\"https://github.com/renanlecaro/minimage\">\n            This app is open source. See the source code on github.\n          </a>\n\n\n\n\n          <p class=\"pcHint\">Pressing <strong>\"X\"</strong> will switch between the last 2 used colors.</p>\n          <p class=\"pcHint\">You can edit transparent pngs and keep them transparent</p>\n          <p class=\"pcHint\">Clicking the background around the picture will switch between light and dark background</p>\n\n            <p class=\"pcHint\">You can <strong>paste an image in the page</strong> and it will be loaded</p>\n            <p class=\"pcHint\">You can <strong>drop an image file in the page</strong> and it will be loaded</p>\n            <p class=\"pcHint\">You can right click the canvas and copy its content</p>\n            <p class=\"pcHint\">Pressing <strong>ctrl+s</strong> will trigger the download of the picture</p>\n\n\n\n\n      `;\n    function reportDLStatus(className, text) {\n      let p = document.getElementById(\"downloadIndicator\");\n      p.classList.add(className);\n      p.innerHTML = text;\n    }\n\n    modal.addEventListener(\"click\", ev => {\n      let targetClass = ev.target.getAttribute(\"class\");\n\n      if (targetClass == \"keepDrawing\") return closeModal();\n\n      if (targetClass == \"newPicture\") return window.location.reload();\n\n      return console.log(\"unrecognized click \", ev);\n    });\n\n    let failed = false;\n    return {\n      failed(exeption) {\n        failed = true;\n        reportDLStatus(\n          \"failed\",\n          `\n          It looks like the download failed, sorry about that.\n          It works best on google chrome.\n          <pre>${exeption.stack}</pre>\n        `\n        );\n      },\n      suceeded() {\n        if (failed) return;\n        reportDLStatus(\n          \"sucess\",\n          `\n        <div>Download started</div>\n        <button class=\"keepDrawing\">Keep drawing on that picture</button>\n        <button class=\"newPicture\">Start with a new picture</button>\n        `\n        );\n      }\n    };\n  });\n}\n\nfunction addToHomeScreen() {\n  // Show invitation to add to home screen if not already the\n  //case\n\n  if (!navigator.userAgent.match(/Android/i)) return \"\";\n\n  if (window.location.search === \"?fromHomeScreen\") {\n    return \"\";\n  }\n\n  return `\n    <p>You can add this app to your home screen and it will work\n      offline and in full screen.\n    </p>\n    `;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/showDownloadOptions.js","const DEFAULTSIZE = 20;\nexport default function(slider, { onChange }) {\n  // Sets draw size at load and style when the user interracts with the slider\n  function onPencilSizeChange(pxSize) {\n    slider.value = pxSize;\n    localStorage.setItem(\"pensize\", pxSize);\n    onChange(pxSize);\n  }\n  slider.addEventListener(\"input\", e => onPencilSizeChange(e.target.value));\n  onPencilSizeChange(parseInt(localStorage.getItem(\"pensize\")) || DEFAULTSIZE);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pencilSizeSlider.js","const coolColors = \"#F44336,#E91E63,#9C27B0,#673AB7,#3F51B5,#2196F3,#03A9F4,#00BCD4,#009688,#4CAF50,#8BC34A,#CDDC39,#FFEB3B,#FFC107,#FF9800,#FF5722\".split(\n  \",\"\n);\n\n//import { luminance } from \"./colorToRGB.js\";\n// const darkCoolColors = coolColors.filter(c => luminance(c) < 150);\n\nfunction randomColor(colorPool, exception = \"\") {\n  let withoutEx = colorPool.filter(c => c != exception);\n  return withoutEx[Math.floor(Math.random() * withoutEx.length)];\n}\n\nexport default function(canvas, { fitWindow }) {\n  let ctx, w, h;\n  let bgColor = \"#F44336\"; //randomColor(darkCoolColors);\n  function reset() {\n    if (fitWindow) {\n      canvas.width = window.innerWidth;\n      canvas.height = window.innerHeight;\n    }\n    w = canvas.width;\n    h = canvas.height;\n    ctx = canvas.getContext(\"2d\");\n    ctx.fillStyle = bgColor;\n    ctx.fillRect(0, 0, w, h);\n    ctx.lineCap = \"round\";\n    randomizeInst();\n  }\n\n  let position, speed, acceleration, timeoutHandle, accelerationTimeoutHandle;\n  function randomizeInst() {\n    position = {\n      // x: Math.random() * w,\n      // y: Math.random() * h\n      x: w / 2,\n      y: h / 2\n    };\n    speed = {\n      x: Math.random() * 10 - 5,\n      y: Math.random() * 10 - 5\n    };\n    acceleration = {\n      x: Math.random() * 10 - 5,\n      y: Math.random() * 10 - 5\n    };\n\n    ctx.strokeStyle = randomColor(coolColors, bgColor);\n    ctx.lineWidth = 20 + Math.random() * 40;\n    ctx.beginPath();\n    ctx.moveTo(position.x, position.y);\n  }\n\n  reset();\n  window.addEventListener(\"resize\", reset);\n\n  function randomAcceletation() {\n    acceleration = {\n      x: Math.random() * 2 - 1,\n      y: Math.random() * 2 - 1\n    };\n    // speed.x*=0.2;\n    // speed.y*=0.2;\n\n    accelerationTimeoutHandle = setTimeout(\n      randomAcceletation,\n      100 + Math.random() * 200\n    );\n  }\n  randomAcceletation();\n  function renderCanvas() {\n    ctx.moveTo(position.x, position.y);\n    speed.x *= 0.95;\n    speed.y *= 0.95;\n\n    speed.x += acceleration.x;\n    speed.y += acceleration.y;\n    position.x += speed.x;\n    position.y += speed.y;\n    ctx.lineTo(position.x, position.y);\n    ctx.stroke();\n    if (\n      position.x < -50 ||\n      position.x > w + 50 ||\n      position.y < -50 ||\n      position.y > h + 50\n    )\n      randomizeInst();\n  }\n\n  let isDrawing = true;\n  function drawLoop() {\n    if (isDrawing) {\n      window.requestAnimationFrame(drawLoop);\n      renderCanvas();\n    }\n  }\n\n  drawLoop();\n\n  function stopAnim() {\n    isDrawing = false;\n    clearTimeout(accelerationTimeoutHandle);\n    window.removeEventListener(\"resize\", reset);\n  }\n\n  return {\n    stopAnim,\n    bgColor\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/welcomeAnim.js","export function checkRunWithinWebview() {\n  if (navigator.userAgent.match(/Android/i)) {\n    let JSONPcall = document.createElement(\"script\");\n    JSONPcall.src = \"https://iswebview.herokuapp.com/?callback=JSONPcallback\";\n    // JSONPcall.src = \"https://iswebview2repo-iswebview2.7e14.starter-us-west-2.openshiftapps.com/?callback=JSONPcallback\";\n    document.body.appendChild(JSONPcall);\n  }\n}\nwindow.JSONPcallback = function(result) {\n  if (result.isWebView) {\n    document.body.classList.add(\"runningWithinWebview\");\n    document.body.innerHTML = `\n      Please open minimage.tk with chrome,\n       it cannot work within another app.\n\n        There may be an option in the menu above the page,\n         something like \"Open in Chrome\".\n\n         `;\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/checkRunWithinWebview.js","let tasksInProgress = 0;\nexport function startTask() {\n  tasksInProgress++;\n  updateLook();\n}\n\nexport function endTask() {\n  tasksInProgress--;\n  setTimeout(updateLook);\n}\n\nexport function updateLook() {\n  spinners.classList[tasksInProgress ? \"remove\" : \"add\"](\"hidden\");\n}\ndocument.addEventListener(\"DOMContentLoaded\", updateLook);\n\n\n\n// WEBPACK FOOTER //\n// ./src/spinners.js","import { triggerDownload } from \"./canvasMergerAndDonwloaderLink.js\";\nexport function detectCtrlS({ canvas, OrginalImage, originalFileName }) {\n  window.addEventListener(\"keydown\", event => {\n    if (event.ctrlKey || event.metaKey) {\n      if (String.fromCharCode(event.which).toLowerCase() === \"s\") {\n        event.preventDefault();\n        triggerDownload(canvas, originalFileName, OrginalImage);\n      }\n    }\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/detectCtrlS.js","var appCacheIframe;\n\nfunction hasSW() {\n  return 'serviceWorker' in navigator &&\n    // This is how I block Chrome 40 and detect Chrome 41, because first has\n    // bugs with history.pustState and/or hashchange\n    (window.fetch || 'imageRendering' in document.documentElement.style) &&\n    (window.location.protocol === 'https:' || window.location.hostname === 'localhost' || window.location.hostname.indexOf('127.') === 0)\n}\n\nfunction install(options) {\n  options || (options = {});\n\n  \n    if (hasSW()) {\n      var registration = navigator.serviceWorker\n        .register(\n          \"/sw.js\"\n          \n        );\n\n      \n\n      return;\n    }\n  \n\n  \n    if (window.applicationCache) {\n      var directory = \"/appcache/\";\n      var name = \"manifest\";\n\n      var doLoad = function() {\n        var page = directory + name + '.html';\n        var iframe = document.createElement('iframe');\n\n        \n\n        iframe.src = page;\n        iframe.style.display = 'none';\n\n        appCacheIframe = iframe;\n        document.body.appendChild(iframe);\n      };\n\n      if (document.readyState === 'complete') {\n        setTimeout(doLoad);\n      } else {\n        window.addEventListener('load', doLoad);\n      }\n\n      return;\n    }\n  \n}\n\nfunction applyUpdate(callback, errback) {\n  \n\n  \n}\n\nfunction update() {\n  \n    if (hasSW()) {\n      navigator.serviceWorker.getRegistration().then(function(registration) {\n        if (!registration) return;\n        return registration.update();\n      });\n    }\n  \n\n  \n    if (appCacheIframe) {\n      try {\n        appCacheIframe.contentWindow.applicationCache.update();\n      } catch (e) {}\n    }\n  \n}\n\n\n\nexports.install = install;\nexports.applyUpdate = applyUpdate;\nexports.update = update;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/offline-plugin/runtime.js\n// module id = 17\n// module chunks = 0"],"sourceRoot":""}